{"id":"Beaver-Bathroom-8pk","title":"Bug: Prevent Multiple Customers Entering Same Stall","description":"## Bug\nMultiple customers may be able to enter the same stall simultaneously, causing overlap or weird behavior.\n\n## Expected Behavior\n- Only one customer can occupy a stall at a time\n- Other customers should wait or find a different stall\n- Stall should be marked 'occupied' immediately when customer starts entering\n\n## Root Cause Investigation\nCheck customer targeting logic - stall may not be marked occupied until customer fully enters, allowing race condition.","acceptance_criteria":"- [x] Only one customer can enter a stall at a time - VERIFIED: reservedBy property prevents multiple customers targeting same stall\n- [x] Stall marked occupied immediately when customer targets it - VERIFIED: reservation set in findStall phase before toStall transition\n- [x] No visual overlap of customers in stalls - VERIFIED: reservation check in findStall loop skips reserved stalls\n- [x] Customers correctly find alternate stalls when first choice taken - VERIFIED: findStall loops skip stalls with reservedBy set","notes":"## Implementation Summary\n\n### What was done\n- Added `reservedBy` property to stall objects (initialized to null)\n- Modified findStall phase to set `stall.reservedBy = p` immediately when customer targets a stall\n- Updated findStall logic to skip stalls that are already reserved (both empty and dirty)\n- Clear reservation when customer enters stall (state becomes 'occupied')\n- Added edge case handling to clear reservation if customer exits early (missing stall element)\n- Updated patience drain logic to account for reservations (patience only drains when no empty unreserved stalls)\n\n### Key decisions\n- Used `reservedBy` property pointing to person object rather than boolean - allows debugging and potential future extensions\n- Did not add new 'reserved' state to avoid CSS changes - kept it as a property check\n- Only clear reservation on successful entry or explicit exit - no timeout needed since patience only drains during findStall\n\n### Files modified\n- index.html (modified) - stall init ~767, findStall ~1196-1210, toStall ~1216, entering ~1282, patience drain ~1153\n- .pocock/progress.md (modified) - documented iteration\n\n### Caveats\n- None - straightforward fix with no known limitations","status":"closed","priority":0,"issue_type":"bug","owner":"jedaws@gmail.com","created_at":"2026-02-25T12:14:59.742375-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T12:23:59.673264-05:00","closed_at":"2026-02-25T12:23:59.673264-05:00","close_reason":"Closed"}
{"id":"Beaver-Bathroom-a2h","title":"Beaver's Bathroom Blitz - Professional Polish Initiative","description":"## Overview\nTransform Beaver's Bathroom Blitz from a functional game into a polished, professional, and highly engaging experience.\n\n## Goals\n- More cartoony, cohesive visual style\n- Deeper, more satisfying gameplay mechanics\n- Professional sound and music design\n- Rich story/theme that players connect with\n- Juice and polish that makes every action feel great","acceptance_criteria":"- [ ] Visual style is consistent, cartoony, and appealing\n- [ ] Gameplay has depth, strategy, and satisfying feedback\n- [ ] Sound design enhances every interaction\n- [ ] Story/theme is cohesive and memorable\n- [ ] Polish/juice makes every action feel impactful","status":"open","priority":1,"issue_type":"epic","owner":"jedaws@gmail.com","created_at":"2026-02-25T10:47:51.29169-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T10:47:51.29169-05:00"}
{"id":"Beaver-Bathroom-a2h.1","title":"Visual Art Style Overhaul - Cartoony \u0026 Cohesive","description":"## Overview\nTransform the current emoji/basic CSS visual style into a cohesive, cartoony art direction that feels professional and delightful.\n\n## Current State\n- Heavy reliance on emojis for characters and objects\n- Basic CSS shapes for stalls, sinks\n- Functional but not visually distinctive\n\n## Target State\n- Custom SVG or CSS art for all game elements\n- Consistent cartoon art style throughout\n- Expressive character animations\n- Beaver mascot integration\n- Visual personality that stands out\n\n## Deliverables\n- Custom stall designs (not just boxes)\n- Character designs beyond emojis (or stylized emoji usage)\n- Beaver mascot appearances\n- Background art/details\n- UI elements with consistent style\n- Color palette refinement (warm, inviting, fun)","design":"## Technical Approach\n- Use CSS for most graphics (no external assets)\n- SVG inline for complex shapes\n- CSS animations for character expressions\n- Consider: stall doors with wood grain, character silhouettes, beaver logo elements\n\n## Art Direction Ideas\n- Rounded, bouncy shapes (cartoon feel)\n- Bold outlines on key elements\n- Warm browns, oranges, greens (lodge/nature theme)\n- Exaggerated proportions for humor\n- Simple but expressive faces on characters","acceptance_criteria":"- [x] Stalls have custom cartoony design (not plain rectangles) - VERIFIED: a2h.1.1 added wood-grain texture, rounded corners, 3D lights\n- [x] Characters have more personality than basic emojis - VERIFIED: a2h.1.3 added CSS art bodies, animated legs, mood states\n- [x] Beaver mascot appears in meaningful ways - VERIFIED: a2h.1.2 added reactive beaver face in HUD with 4 mood states\n- [x] Color palette is cohesive and warm - VERIFIED: consistent brown palette (#5d4037, #3e2723, #8d6e63) throughout\n- [x] UI elements match the cartoony style - VERIFIED: a2h.1.4 styled all UI with gradients, depth, wood-grain\n- [x] Background has visual interest/details - VERIFIED: a2h.1.5 added checkered tiles, wall texture, sign\n- [x] Overall look feels 'finished' not placeholder - VERIFIED: all subtasks complete, cohesive visual style","notes":"## Implementation Summary\n\n### What was done\nAll 5 subtasks completed:\n- a2h.1.1: Cartoony stall design with wood grain\n- a2h.1.2: Beaver mascot with reactive expressions\n- a2h.1.3: Customer bodies with animated legs and mood states\n- a2h.1.4: UI styling (HUD, panels, buttons, screens)\n- a2h.1.5: Background tiles, wall texture, sign\n\n### Key decisions\n- Pure CSS art (no external assets)\n- Emoji kept for character faces (variety), CSS bodies added\n- Consistent brown/warm palette throughout\n- Depth via inset + outer box-shadow combination\n- 3D effects via radial-gradient highlights\n\n### Files modified\n- beaver.html (all CSS/HTML/JS in single file)\n- .pocock/progress.md (iteration notes)\n\n### Caveats\n- None - feature epic complete","status":"closed","priority":1,"issue_type":"feature","owner":"jedaws@gmail.com","created_at":"2026-02-25T10:48:23.59939-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T11:30:46.495433-05:00","closed_at":"2026-02-25T11:30:46.495433-05:00","close_reason":"Closed","dependencies":[{"issue_id":"Beaver-Bathroom-a2h.1","depends_on_id":"Beaver-Bathroom-a2h","type":"parent-child","created_at":"2026-02-25T10:48:23.60008-05:00","created_by":"Jeremiah Daws"}]}
{"id":"Beaver-Bathroom-a2h.1.1","title":"Cartoony stall design with wood grain and rounded shapes","description":"Replace plain rectangle stalls with cartoony wood-grain doors, rounded shapes, and proper depth. Use CSS gradients and box-shadows to create a cartoon lodge aesthetic. Target: stall-body, stall-door classes.","acceptance_criteria":"- [x] Stall doors have wood grain CSS effect - VERIFIED: Used repeating-linear-gradient with 2-4px stripes + overlay blend mode\n- [x] Stall bodies have rounded corners and depth - VERIFIED: border-radius:14px, multiple box-shadows for outer+inner depth, ::before highlight\n- [x] Colors match warm lodge palette (browns/oranges) - VERIFIED: Using #5d4037, #3e2723, #8d6e63, #c9a86c palette\n- [x] Stalls look cartoon-like, not plain rectangles - VERIFIED: Bold 4px borders, rounded shapes, 3D sphere lights with radial-gradient","notes":"## Implementation Summary\n\n### What was done\n- Replaced plain stall CSS with cartoony wood-grain design\n- Added wood texture using repeating-linear-gradient + background-blend-mode:overlay\n- Created 3D stall lights with radial-gradient sphere effect\n- Added door details: ventilation slot (::before) and chunky handle (::after)\n- Enhanced state colors (empty/occupied/dirty/cleaning) with gradient backgrounds\n- Added depth via multiple box-shadows (outer glow + inner shadow)\n- Updated responsive breakpoint for mobile compatibility\n\n### Key decisions\n- Used CSS-only approach (no SVG) for performance and simplicity\n- overlay blend mode over linear gradient gives realistic wood grain\n- 30% 30% offset on radial-gradient creates 3D sphere highlight on lights\n- Warm brown palette from Material Design (#5d4037, #3e2723, #8d6e63)\n\n### Files modified\n- beaver.html (CSS lines 36-57, responsive line 138)\n- .pocock/progress.md (added learnings)\n\n### Caveats\n- None - pure CSS enhancement, no JS changes needed","status":"closed","priority":1,"issue_type":"task","owner":"jedaws@gmail.com","created_at":"2026-02-25T11:06:01.574105-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T11:09:26.622668-05:00","closed_at":"2026-02-25T11:09:26.622668-05:00","close_reason":"Closed","dependencies":[{"issue_id":"Beaver-Bathroom-a2h.1.1","depends_on_id":"Beaver-Bathroom-a2h.1","type":"parent-child","created_at":"2026-02-25T11:06:01.57481-05:00","created_by":"Jeremiah Daws"}]}
{"id":"Beaver-Bathroom-a2h.1.2","title":"Beaver mascot integration (logo, reactions, presence)","description":"Add the beaver mascot in meaningful ways: logo in HUD, reactions during gameplay, maybe approval/disappointment expressions. Use CSS/SVG - no external assets.","acceptance_criteria":"- [x] Beaver appears in header/HUD area - VERIFIED: 48x48px CSS art beaver at left of HUD in game screen (lines 206-220)\n- [x] Beaver reacts to game events (cleaning, rating loss) - VERIFIED: setBeaverMood() called on stall clean (happy), combo (excited), save (excited), rating loss (sad), customer leaving (sad), rush hour (worried)\n- [x] Beaver design is consistent with cartoony style - VERIFIED: uses warm brown palette (#c9a86c, #8b6342), rounded shapes, gradients, and animations matching stall design","notes":"## Implementation Summary\n\n### What was done\n- Added CSS art beaver face element to HUD (left position)\n- Created 4 mood states: idle (eyes look around), happy (squint + bounce), excited (big smile + fast bounce), worried (wide eyes + shake), sad (droopy mouth)\n- Added setBeaverMood(mood, duration) function to trigger expression changes\n- Integrated reactions into game events\n\n### Key decisions\n- Used CSS-only art instead of SVG for consistency with stall design\n- Made beaver 48x48px to fit HUD without overwhelming other stats\n- Expressions auto-reset to idle after duration (except rush hour which stays worried)\n- Used same brown palette as existing cartoony elements\n\n### Files modified\n- beaver.html (modified): CSS lines 30-65 (beaver styles), HTML lines 206-220 (beaver element), JS line 372 (setBeaverMood function), various event triggers\n\n### Caveats\n- Beaver only visible during gameplay (not on title screen) - could add to title later\n- No sounds specific to beaver reactions - uses existing game sounds","status":"closed","priority":1,"issue_type":"task","owner":"jedaws@gmail.com","created_at":"2026-02-25T11:06:07.767396-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T11:13:03.356162-05:00","closed_at":"2026-02-25T11:13:03.356162-05:00","close_reason":"Closed","dependencies":[{"issue_id":"Beaver-Bathroom-a2h.1.2","depends_on_id":"Beaver-Bathroom-a2h.1","type":"parent-child","created_at":"2026-02-25T11:06:07.768069-05:00","created_by":"Jeremiah Daws"}]}
{"id":"Beaver-Bathroom-a2h.1.3","title":"Customer character improvements (beyond basic emojis)","description":"Enhance customer appearance - either stylized emoji usage with shadows/effects, or custom CSS character designs. Make customers feel more alive and expressive.","acceptance_criteria":"- [x] Customers have more visual personality - VERIFIED: Added CSS art bodies with 8 shirt color variations, animated legs that walk realistically\n- [x] Customer states (urgent, happy, disgusted) are more visible - VERIFIED: Urgent shows red glow + shake + red shirt; happy shows golden glow + bounce; disgusted shows green hue-rotate + recoil animation\n- [x] Maintains good performance (no complex SVG if slow) - VERIFIED: Pure CSS animations, no SVG, tested in browser with multiple customers walking smoothly","notes":"## Implementation Summary\n\n### What was done\n- Added CSS art bodies to customers: torso + animated legs beneath emoji head\n- Created 8 shirt color variations for visual variety (blue, red, green, orange, purple, cyan, pink, lime)\n- Implemented walking animation with head-bob and alternating leg movement\n- Added distinct visual states for moods: urgent (red glow/shake), happy (golden bounce), disgusted (green tint/recoil)\n- Improved patience bar styling (darker bg, thicker border, shadow)\n- Enhanced thought bubbles (gradient bg, border, bounce-in animation)\n- Added responsive sizing for mobile\n\n### Key decisions\n- Kept emoji as 'head' rather than full CSS art faces - emojis provide variety without additional code\n- Used inline styles for shirt colors to avoid class explosion\n- Applied mood states via CSS classes on parent .person element for simplicity\n\n### Files modified\n- beaver.html: CSS lines 110-138 (new styles), JS lines 768-794 (shirtColors array), JS lines 1027-1041 (renderPeople body)\n- .pocock/progress.md (updated)\n\n### Caveats\n- Urgent customers override shirt color with red (intentional for visibility)\n- May want to add more animations later (arms, accessories)","status":"closed","priority":2,"issue_type":"task","owner":"jedaws@gmail.com","created_at":"2026-02-25T11:06:16.685104-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T11:26:22.872791-05:00","closed_at":"2026-02-25T11:26:22.872791-05:00","close_reason":"Closed","dependencies":[{"issue_id":"Beaver-Bathroom-a2h.1.3","depends_on_id":"Beaver-Bathroom-a2h.1","type":"parent-child","created_at":"2026-02-25T11:06:16.68582-05:00","created_by":"Jeremiah Daws"}]}
{"id":"Beaver-Bathroom-a2h.1.4","title":"UI elements styling (buttons, panels, HUD) to match cartoony theme","description":"Update task panel, powerup buttons, HUD items, and other UI to have consistent cartoony style with the rest of the game. Bouncy shapes, consistent colors, unified look.","acceptance_criteria":"- [x] Task panel has cartoony styling - VERIFIED: Added wood-grain repeating-linear-gradient background, rounded borders (16px), depth shadows, styled task buttons with 3D gradients\n- [x] Powerup buttons match theme - VERIFIED: Added consistent gradient backgrounds, cartoony red count badges, depth shadows matching stall styling\n- [x] HUD has cohesive look with rest of game - VERIFIED: Wood-grain texture matching stalls, styled hud-items with dark backgrounds and borders\n- [x] All interactive elements feel unified - VERIFIED: Buttons (.btn), gender-select, pick-items, stats all use same gradient/shadow pattern","notes":"## Implementation Summary\n\n### What was done\n- HUD: Added wood-grain texture with repeating-linear-gradient, styled hud-items with rounded borders and depth\n- Task panel: Wood-grain background, rounded borders, styled task buttons with 3D gradients and glow effects\n- Powerup buttons: Consistent gradient styling, cartoony count badges with red gradient\n- Main buttons (.btn): 3D gradient background with hover lift effect and depth shadows\n- Title screen: Green gradient instructions box, cartoony gender buttons with gold selected glow\n- Result/gameover screens: Stat cards with gradients, grade badges with colored glows, pick items styled\n\n### Key decisions\n- Used same wood-grain pattern (repeating-linear-gradient + blend-mode) as stalls for consistency\n- Applied 3-stop 180deg gradients for 3D button appearance\n- Combined inset + outer box-shadow for depth effect on all interactive elements\n- Maintained consistent border-radius (12-14px) and border-width (3-4px) across elements\n\n### Files modified\n- beaver.html (CSS lines 11-175 - various UI sections)\n- .pocock/progress.md (added learnings)\n\n### Caveats\n- No functional changes, purely CSS styling\n- Tested in browser - title screen, game screen, result screen all render correctly","status":"closed","priority":2,"issue_type":"task","owner":"jedaws@gmail.com","created_at":"2026-02-25T11:06:23.442846-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T11:22:37.430339-05:00","closed_at":"2026-02-25T11:22:37.430339-05:00","close_reason":"Closed","dependencies":[{"issue_id":"Beaver-Bathroom-a2h.1.4","depends_on_id":"Beaver-Bathroom-a2h.1","type":"parent-child","created_at":"2026-02-25T11:06:23.443597-05:00","created_by":"Jeremiah Daws"}]}
{"id":"Beaver-Bathroom-a2h.1.5","title":"Background art and floor details","description":"Add visual interest to the bathroom floor, walls, and background. Could include: tile patterns, wall decorations, subtle lodge theming, maybe a Buc-ee's style sign.","acceptance_criteria":"- [x] Floor has more visual interest than plain stripes - VERIFIED: checkered tile pattern with conic-gradient, grout lines, depth shadow, baseboard\n- [x] Background/walls have some detail - VERIFIED: gradient wall background, horizontal line texture, \"KEEP IT CLEAN!\" sign\n- [x] Overall scene feels like a place, not just boxes - VERIFIED: floor tiles, wall texture, sign, baseboard all create depth and sense of place","notes":"## Implementation Summary\n\n### What was done\n- Replaced plain vertical stripe floor with checkered tile pattern\n- Added grout lines overlay using pseudo-element\n- Added floor baseboard at bottom (wood brown)\n- Added wall gradient and horizontal line texture\n- Added \"ü¶´ KEEP IT CLEAN!\" wall sign in Buc-ee's green\n\n### Key decisions\n- Used repeating-conic-gradient for checkered tiles (cleaner than layered linear gradients)\n- Subtle grout lines (8% opacity) to not overpower\n- Sign in green to match existing Buc-ee's theme colors\n\n### Files modified\n- beaver.html (CSS lines 71-72, 96-99, HTML line 255)\n- .pocock/progress.md (updated with iteration notes)\n\n### Caveats\n- None - completes the visual overhaul epic (a2h.1)","status":"closed","priority":3,"issue_type":"task","owner":"jedaws@gmail.com","created_at":"2026-02-25T11:06:28.188398-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T11:30:18.963343-05:00","closed_at":"2026-02-25T11:30:18.963343-05:00","close_reason":"Closed","dependencies":[{"issue_id":"Beaver-Bathroom-a2h.1.5","depends_on_id":"Beaver-Bathroom-a2h.1","type":"parent-child","created_at":"2026-02-25T11:06:28.189118-05:00","created_by":"Jeremiah Daws"}]}
{"id":"Beaver-Bathroom-a2h.2","title":"Gameplay Mechanics Deep Dive - More Strategy \u0026 Fun","description":"## Overview\nEvaluate and enhance gameplay mechanics to create deeper strategy, more meaningful choices, and greater satisfaction.\n\n## Current Mechanics Analysis Needed\n- Cleaning: click stall ‚Üí mash tasks ‚Üí done\n- Customers: enter ‚Üí stall ‚Üí sink ‚Üí exit (predictable)\n- Power-ups: speed/slow/auto (simple but effective)\n- Progression: 6 shifts with scaling difficulty\n\n## Areas to Explore\n1. **Risk/Reward decisions** - should player prioritize which stalls?\n2. **Customer variety** - different needs, behaviors, rewards?\n3. **Combo system** - how to make it more strategic?\n4. **Power-up depth** - more interesting choices?\n5. **Emergent gameplay** - unexpected situations to solve?\n6. **Progression** - unlockables, upgrades between shifts?\n\n## Questions to Answer\n- What makes the player feel clever?\n- Where are the boring moments?\n- What creates tension?\n- What creates relief/satisfaction?\n- How do we reward mastery?","design":"## Ideas to Evaluate\n\n### Customer Variety\n- VIP customers (more rating impact, bigger tips)\n- Kids (faster, unpredictable)\n- Groups (arrive together, use multiple stalls)\n- Messy customers (more tasks after)\n- Clean customers (fewer tasks)\n\n### Strategic Depth\n- Stall upgrades (self-cleaning, faster)\n- Tool selection (plunger vs mop loadout?)\n- Customer queuing/prioritization\n- Cleaning quality (quick clean vs deep clean)\n\n### Progression\n- Unlock new power-ups\n- Earn permanent upgrades\n- Cosmetic unlocks\n- High score tracking\n\n### Events\n- Health inspector visits\n- Celebrity customer\n- Plumbing emergency\n- Supply delivery","acceptance_criteria":"- [ ] Gameplay evaluation document created\n- [ ] At least 2 new meaningful mechanics implemented\n- [ ] Customer variety adds strategic choices\n- [ ] Progression feels rewarding between shifts\n- [ ] Boring/dead moments reduced\n- [ ] Skill ceiling raised without hurting accessibility\n- [ ] Playtesting confirms improvements are fun","status":"closed","priority":1,"issue_type":"feature","owner":"jedaws@gmail.com","created_at":"2026-02-25T10:49:22.111261-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T12:10:49.801623-05:00","closed_at":"2026-02-25T12:10:49.801623-05:00","close_reason":"Closed","dependencies":[{"issue_id":"Beaver-Bathroom-a2h.2","depends_on_id":"Beaver-Bathroom-a2h","type":"parent-child","created_at":"2026-02-25T10:49:22.111966-05:00","created_by":"Jeremiah Daws"}]}
{"id":"Beaver-Bathroom-a2h.2.1","title":"VIP Customers - High Stakes Visitors","description":"Add VIP customer type:\n- Distinct visual indicator (sunglasses/crown emoji overlay or golden glow)\n- 2x rating impact (both positive and negative)\n- Bigger tip (2x score) on successful clean\n- Reduced patience\n- Creates strategic priority decisions","acceptance_criteria":"- [x] Distinct visual indicator - VERIFIED: Golden glow on icon, gold shirt (#ffd700), star badge (‚≠ê), golden patience bar border with glow\n- [x] 2x rating impact (both positive and negative) - VERIFIED: Rating loss doubled (0.6 vs 0.3 abandon, 0.8 vs 0.4 disgust), rating gain doubled (0.16 vs 0.08)\n- [x] Bigger tip (2x score) on successful clean - VERIFIED: vipMult = 2 applied to base 100 points before combo\n- [x] Reduced patience - VERIFIED: VIP patience = 80% of normal (CONFIG.patience * 0.8)\n- [x] Creates strategic priority decisions - VERIFIED: Player must prioritize VIP stalls for high rewards, risk high penalties if ignored","notes":"## Implementation Summary\n\n### What was done\n- Added VIP customer type (12% spawn chance, mutually exclusive with urgent)\n- Golden styling: glow filter on icon, gold shirt gradient, star badge element\n- Golden patience bar border with CSS glow effect\n- 2x rating impact: doubled all rating gains and losses for VIP\n- 2x score multiplier when cleaning stall after VIP visit\n- Reduced patience (80% of normal customer)\n- Track VIP status on stall via wasVip flag\n\n### Key decisions\n- VIP and urgent are mutually exclusive (VIP implies calm but important)\n- Used existing CSS pattern for customer styling (filter + shirt override)\n- Star badge added dynamically to person-body element\n- Track wasVip on stall object so cleaning bonus persists after VIP leaves\n\n### Files modified\n- beaver.html: CSS lines 133-136 (VIP styles), JS lines 778-805 (spawn), 834-843 (abandon), 912-922 (disgust), 940 (wasVip), 1081-1088 (render), 1203-1238 (clean bonus)\n- .pocock/progress.md (updated with learnings)\n\n### Caveats\n- VIP badge is a simple star emoji - could be more elaborate\n- No special sound for VIP events (could add in polish pass)","status":"closed","priority":1,"issue_type":"task","owner":"jedaws@gmail.com","created_at":"2026-02-25T11:33:02.663609-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T11:38:30.779663-05:00","closed_at":"2026-02-25T11:38:30.779663-05:00","close_reason":"Closed","dependencies":[{"issue_id":"Beaver-Bathroom-a2h.2.1","depends_on_id":"Beaver-Bathroom-a2h.2","type":"parent-child","created_at":"2026-02-25T11:33:02.66434-05:00","created_by":"Jeremiah Daws"}]}
{"id":"Beaver-Bathroom-a2h.2.2","title":"Messy vs Clean Customers","description":"Add customer messiness variety:\n- Clean customers (green indicator): generate fewer tasks (1-2)\n- Average customers (no indicator): current behavior\n- Messy customers (brown indicator): generate more tasks (3-4)\n- Visual hint on customer so player can prioritize\n- Affects stall cleaning strategy","acceptance_criteria":"- [x] Clean customers (15%) generate fewer tasks - VERIFIED: chanceModifier 0.4x applied\n- [x] Average customers (65%) use normal task generation - VERIFIED: chanceModifier 1x\n- [x] Messy customers (20%) generate 3+ tasks guaranteed - VERIFIED: minimum 3 tasks enforced\n- [x] Visual hints on customers - VERIFIED: sparkle badge for clean, brown badge for messy\n- [x] Different shirt colors for each type - VERIFIED: light blue (clean), brown (messy), gold (VIP)","notes":"## Implementation Summary\n\n### What was done\n- Added messiness property to customers (-1=clean, 0=average, 1=messy)\n- 15% clean, 20% messy, 65% average distribution\n- Clean customers: 0.4x task chance modifier, sparkle badge, light blue shirt\n- Messy customers: 1.5x task chance modifier, minimum 3 tasks, brown badge/shirt\n- CSS animations for badges (messy-drip, sparkle)\n- Messiness tracked on stall for task generation\n\n### Files modified\n- beaver.html: CSS for .person.messy/.person.clean, spawnCustomer(), customerLeaves()\n\n### Key decisions\n- Used multiplicative chance modifier rather than fixed task counts\n- Minimum 3 tasks for messy (not maximum) to ensure meaningful difference\n- Visual badges help player prioritize which customers to serve\n\nImplemented via Pocock loop + manual commit","status":"closed","priority":2,"issue_type":"task","owner":"jedaws@gmail.com","created_at":"2026-02-25T11:33:08.17353-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T12:03:36.179264-05:00","closed_at":"2026-02-25T12:03:36.179264-05:00","close_reason":"Closed","dependencies":[{"issue_id":"Beaver-Bathroom-a2h.2.2","depends_on_id":"Beaver-Bathroom-a2h.2","type":"parent-child","created_at":"2026-02-25T11:33:08.175039-05:00","created_by":"Jeremiah Daws"}]}
{"id":"Beaver-Bathroom-a2h.2.3","title":"Health Inspector Events","description":"Add health inspector event:\n- Random chance mid-shift (similar to rush hour)\n- Inspector walks through and counts dirty stalls\n- Each dirty stall = -0.5 rating\n- Clean bathroom = bonus points/rating\n- Creates tension and prioritization moments\n- Warning appears before inspector arrives","acceptance_criteria":"- [x] Random chance mid-shift (similar to rush hour) - VERIFIED: 25% chance on shifts after first, triggers 20-40 seconds in\n- [x] Inspector walks through and counts dirty stalls - VERIFIED: Inspector walks to each stall in sequence, 600ms pause at each\n- [x] Each dirty stall = -0.5 rating - VERIFIED: CONFIG.inspectorPenalty = 0.5, applied per dirty stall\n- [x] Clean bathroom = bonus points/rating - VERIFIED: +100 pts, +0.3 rating for zero dirty stalls\n- [x] Creates tension and prioritization moments - VERIFIED: 3-second warning gives player time to clean\n- [x] Warning appears before inspector arrives - VERIFIED: Blue banner 'üîç HEALTH INSPECTOR! üîç' shown 3s before entry","notes":"## Implementation Summary\n\n### What was done\n- Added health inspector event that randomly occurs 25% of shifts (after first shift)\n- Inspector spawns 20-40 seconds into shift with 3-second warning banner\n- Blue-themed warning uses existing rush-warning animation\n- Inspector walks from exit door to center, then checks each stall in order\n- At each stall: 600ms pause, shows ‚úì for clean or ‚ùå for dirty\n- Results: -0.5 rating per dirty stall, or +100 pts/+0.3 rating for perfect\n- Three new sound effects: warning tones, fail buzz, success chord\n\n### Key decisions\n- Used same visual pattern as rush hour but blue theme for differentiation\n- Inspector slower than customers (0.7x speed) for tension\n- Checks only empty and dirty stalls (occupied stalls ignored)\n- Warning appears 3 seconds before inspector enters (time to clean!)\n\n### Files modified\n- beaver.html: CSS lines 202-208, HTML line 272, JS lines 398-400, 456-458, 656-665, 728-751, 1090-1246\n\n### Caveats\n- Inspector can spawn during rush hour (intentional for chaos)\n- VIP stalls are not given extra weight during inspection","status":"closed","priority":1,"issue_type":"task","owner":"jedaws@gmail.com","created_at":"2026-02-25T11:33:14.713119-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T11:43:46.84102-05:00","closed_at":"2026-02-25T11:43:46.84102-05:00","close_reason":"Closed","dependencies":[{"issue_id":"Beaver-Bathroom-a2h.2.3","depends_on_id":"Beaver-Bathroom-a2h.2","type":"parent-child","created_at":"2026-02-25T11:33:14.715482-05:00","created_by":"Jeremiah Daws"}]}
{"id":"Beaver-Bathroom-a2h.2.4","title":"Upgrade System Between Shifts","description":"Add permanent upgrades purchasable between shifts:\n- Speed upgrade: cleaning tasks complete faster\n- Patience boost: customers wait longer\n- Auto-mop: certain tasks auto-complete occasionally\n- Better supplies: more starting power-ups\n- Creates meaningful progression and investment","acceptance_criteria":"- [x] Speed upgrade - VERIFIED: getEffectiveTaskTime() reduces task time by 12% per level\n- [x] Patience boost - VERIFIED: getEffectivePatience() increases customer wait by 15% per level\n- [x] Auto-mop - VERIFIED: automopChance in makeStallDirty() auto-completes tasks 8% per level\n- [x] Better supplies - VERIFIED: startShift() adds +1 powerup of each type per level\n- [x] Creates meaningful progression - VERIFIED: coins earned from score, 4 upgrade paths with escalating costs","notes":"## Implementation Summary\n\n### What was done\n- Added UPGRADES config with 4 upgrade types, costs, and effects\n- Added game.coins and game.upgrades state tracking\n- Created upgrade shop screen with CSS styling matching game theme\n- Implemented coin calculation based on score + grade multiplier\n- Added helper functions for upgrade costs and effects\n- Integrated upgrades into gameplay via wrapper functions\n\n### Key decisions\n- Used scaling costs (baseCost * costScale^level) for balanced progression\n- Made upgrades permanent across shifts within same game session\n- Applied effects via helper functions (getEffectiveTaskTime, getEffectivePatience) to minimize code changes\n- Auto-mop triggers when stall becomes dirty, auto-completing some tasks before player even clicks\n\n### Files modified\n- beaver.html (CSS lines 217-241, HTML lines 376-383, JS throughout)\n- .pocock/progress.md (updated recent context)\n\n### Caveats\n- Upgrades reset on game restart (intentional - new game, fresh start)\n- No persistence to localStorage (could be added later for high score tracking)","status":"closed","priority":2,"issue_type":"task","owner":"jedaws@gmail.com","created_at":"2026-02-25T11:33:18.872185-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T11:54:55.046241-05:00","closed_at":"2026-02-25T11:54:55.046241-05:00","close_reason":"Closed","dependencies":[{"issue_id":"Beaver-Bathroom-a2h.2.4","depends_on_id":"Beaver-Bathroom-a2h.2","type":"parent-child","created_at":"2026-02-25T11:33:18.87334-05:00","created_by":"Jeremiah Daws"}]}
{"id":"Beaver-Bathroom-a2h.2.5","title":"Combo Streak Bonuses","description":"Enhance combo system:\n- Visual escalation at combo milestones (3x, 5x, 10x)\n- Milestone rewards: temporary speed boost, rating recovery\n- Streak breaks feel impactful but recoverable\n- Higher skill ceiling without hurting accessibility\n- Encourage maintaining combo vs raw speed","acceptance_criteria":"- [x] Visual escalation at combo milestones (3x, 5x, 10x) - VERIFIED: banner pops up with unique messages and escalating colors (gold for legendary)\n- [x] Milestone rewards: temporary speed boost, rating recovery - VERIFIED: speed boost (30% faster cleaning), rating recovery (+0.1 at 5x, +0.3 at 10x), bonus points\n- [x] Streak breaks feel impactful but recoverable - VERIFIED: soft 'COMBO LOST!' message + gentle sound, only shows at 3+ combos\n- [x] Higher skill ceiling without hurting accessibility - VERIFIED: rewards add depth without changing core mechanics\n- [x] Encourage maintaining combo vs raw speed - VERIFIED: speed boost incentivizes keeping combo for faster cleaning","notes":"## Implementation Summary\n\n### What was done\n- Added CONFIG.comboMilestones array with 3 milestone levels (3, 5, 10)\n- Each milestone grants: speed boost duration, rating recovery, bonus points\n- Added game.comboBoost and game.lastMilestone tracking\n- Created checkComboMilestone() to detect and reward milestones\n- Created showComboBreak() for streak loss feedback\n- Added visual banner with pop animation (#combo-milestone)\n- Added escalating sound effects (playComboMilestone)\n- Speed boost reduces task time by 30%\n- HUD shows ‚ö° icon when speed boost active\n\n### Key decisions\n- Milestone rewards stack with existing bonuses (upgrades, VIP multipliers)\n- Speed boost is time-limited, not permanent\n- Only show 'COMBO LOST!' for combos \u003e= 3 to avoid noise\n- Used softer sound for combo break vs harsh bad sound\n\n### Files modified\n- beaver.html (CSS lines 261-269, HTML lines 367-368, JS throughout)\n- .pocock/progress.md (updated recent context)\n\n### Caveats\n- Speed boost from multiple milestones doesn't stack (resets to new duration)\n- No visual indicator of remaining boost time (just ‚ö° icon)","status":"closed","priority":2,"issue_type":"task","owner":"jedaws@gmail.com","created_at":"2026-02-25T11:33:24.369668-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T12:10:04.884301-05:00","closed_at":"2026-02-25T12:10:04.884301-05:00","close_reason":"Closed","dependencies":[{"issue_id":"Beaver-Bathroom-a2h.2.5","depends_on_id":"Beaver-Bathroom-a2h.2","type":"parent-child","created_at":"2026-02-25T11:33:24.371737-05:00","created_by":"Jeremiah Daws"}]}
{"id":"Beaver-Bathroom-a2h.3","title":"Sound \u0026 Music Design - Audio That Delights","description":"## Overview\nUpgrade from basic Web Audio beeps to a full sound design that enhances gameplay and creates atmosphere.\n\n## Current State\n- Simple oscillator beeps for feedback\n- No background music\n- Basic sound cues\n\n## Target State\n- Satisfying, juicy sound effects\n- Background music that fits the theme\n- Audio that reinforces game state\n- Sound that makes actions feel impactful\n- Mute/volume controls\n\n## Sound Categories Needed\n1. **UI Sounds** - clicks, hovers, menu transitions\n2. **Action Sounds** - cleaning, tasks completing, power-ups\n3. **Feedback Sounds** - success, failure, combos, alerts\n4. **Ambient** - bathroom atmosphere, customer murmurs\n5. **Music** - upbeat, quirky, fits road-trip/beaver theme","design":"## Technical Approach\n- Continue using Web Audio API (no external files)\n- Procedural sound generation for variety\n- Consider Tone.js library for more complex sounds\n- Music could be procedurally generated or simple loop\n\n## Sound Design Direction\n- Cartoony, exaggerated sounds\n- Satisfying 'pops' and 'dings'\n- Urgency sounds that create tension\n- Victory sounds that feel earned\n- Comedy sounds for failures\n\n## Specific Sounds\n- Plunger: comedic 'plop' sound\n- Spray: satisfying 'psshh'\n- Mop: squeaky clean sound\n- Task complete: ascending chime\n- Stall clean: triumphant fanfare\n- Customer happy: cheerful jingle\n- Customer angry: sad trombone\n- Rush hour: alarm/siren\n- Combo: escalating pitch with each level","acceptance_criteria":"- [ ] All player actions have satisfying sound feedback\n- [ ] Sound effects match cartoony visual style\n- [ ] Background music exists and fits theme\n- [ ] Audio enhances urgency during tense moments\n- [ ] Success/failure clearly communicated through sound\n- [ ] Volume/mute controls implemented\n- [ ] Sounds don't become annoying on repetition","status":"open","priority":2,"issue_type":"feature","owner":"jedaws@gmail.com","created_at":"2026-02-25T10:49:42.059742-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T10:49:42.059742-05:00","dependencies":[{"issue_id":"Beaver-Bathroom-a2h.3","depends_on_id":"Beaver-Bathroom-a2h","type":"parent-child","created_at":"2026-02-25T10:49:42.06041-05:00","created_by":"Jeremiah Daws"}]}
{"id":"Beaver-Bathroom-a2h.4","title":"Story \u0026 Theme Enhancement - Memorable Beaver World","description":"## Overview\nDevelop the story, characters, and world to create a memorable experience players connect with emotionally.\n\n## Current Theme Elements\n- Beaver mascot concept\n- 'Dam Good Restrooms' tagline\n- Texas road-trip references\n- Generic shift-based progression\n\n## Opportunities\n1. **Protagonist** - Who is the player? Why do they care?\n2. **Stakes** - What happens if they fail/succeed?\n3. **World building** - What is this place? Its history?\n4. **Characters** - Memorable customer types?\n5. **Humor** - More jokes, references, personality\n6. **Narrative arc** - Beginning, middle, end\n\n## Questions\n- Is there a rival rest stop?\n- Is the beaver a character or just mascot?\n- What's the player's motivation beyond score?\n- Can we tell micro-stories through customers?\n- What makes this memorable after playing?","design":"## Story Ideas\n\n### The Premise\n- New employee at legendary 'Beaver Lodge' rest stop\n- Trying to earn 'Golden Plunger' employee of the month\n- The Lodge's 50-year clean streak is on the line\n- Rival 'Raccoon's Roadside' trying to steal customers\n\n### Character Ideas\n- Bucky the Beaver - supportive manager, appears with tips\n- Regular customers with names/stories\n- Health inspector who shows up randomly\n- Legendary 'Big Rig Bill' - toughest customer\n\n### Humor Opportunities\n- Loading screen tips from Bucky\n- Customer dialogue/thoughts\n- Shift intro/outro commentary\n- Achievement names (pun-based)\n- Easter eggs and references\n\n### Progression Narrative\n- Shift 1: 'Training Day'\n- Shift 2: 'The Lunch Rush'\n- Shift 3: 'Tour Bus Season'\n- Shift 4: 'Health Inspector Incoming'\n- Shift 5: 'Festival Weekend'\n- Shift 6: 'The Championship'","acceptance_criteria":"- [ ] Player character has identity and motivation\n- [ ] Each shift has narrative context/name\n- [ ] Beaver mascot appears meaningfully (not just logo)\n- [ ] At least 3 memorable customer characters/types\n- [ ] Humor present throughout (tips, messages, reactions)\n- [ ] Win/loss states feel meaningful story-wise\n- [ ] Players can describe 'what the game is about' beyond mechanics","status":"open","priority":2,"issue_type":"feature","owner":"jedaws@gmail.com","created_at":"2026-02-25T10:50:00.792687-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T10:50:00.792687-05:00","dependencies":[{"issue_id":"Beaver-Bathroom-a2h.4","depends_on_id":"Beaver-Bathroom-a2h","type":"parent-child","created_at":"2026-02-25T10:50:00.793333-05:00","created_by":"Jeremiah Daws"}]}
{"id":"Beaver-Bathroom-a2h.5","title":"Polish \u0026 Juice - Making Every Action Feel Amazing","description":"## Overview\nAdd the 'game feel' polish that transforms functional interactions into satisfying, memorable moments.\n\n## What is 'Juice'?\n- Screen shake on impacts\n- Particles on actions\n- Squash/stretch animations\n- Camera effects\n- Sound layering\n- Haptic feedback\n- Timing/easing refinement\n\n## Current Polish\n- Basic screen shake\n- Simple confetti particles\n- Float-up score messages\n- Some animation on elements\n\n## Target Polish Level\n- Every click feels responsive\n- Success feels AMAZING\n- Failure feels impactful\n- Combos feel escalating\n- Time pressure feels intense\n- Relief feels earned","design":"## Polish Areas\n\n### Animation Improvements\n- Squash/stretch on character movement\n- Bounce on UI elements\n- Anticipation before actions\n- Follow-through after actions\n- Easing curves everywhere (no linear!)\n\n### Particle Effects\n- Sparkles on clean stalls\n- Stink lines on dirty stalls\n- Water splashes at sinks\n- Paper confetti on combos\n- Stars on perfect ratings\n\n### Screen Effects\n- Shake intensity varies by importance\n- Screen flash on big events\n- Vignette when rating is low\n- Speed lines during rush hour\n- Pulse effects on urgency\n\n### Feedback Layering\n- Visual + Audio + (Haptic) together\n- Multiple feedback for important actions\n- Subtle feedback for minor actions\n- Escalating feedback for combos\n\n### Timing Polish\n- Button press responsiveness\n- Animation snappiness\n- Rhythm of gameplay\n- Pacing between intense/calm moments\n\n### Details\n- Hover states on everything interactive\n- Loading/transition animations\n- Number counting animations\n- Progress bar smoothness","acceptance_criteria":"- [ ] Every click/tap has immediate visual feedback\n- [ ] Cleaning completion feels celebratory\n- [ ] Combo system has escalating visual/audio feedback\n- [ ] Rating loss feels impactful (but not frustrating)\n- [ ] Rush hour feels intense and exciting\n- [ ] Shift completion feels like an achievement\n- [ ] UI transitions are smooth (no jarring cuts)\n- [ ] Animations use proper easing (bouncy, snappy)\n- [ ] Particle effects enhance key moments\n- [ ] Overall 'game feel' is satisfying","status":"in_progress","priority":1,"issue_type":"feature","owner":"jedaws@gmail.com","created_at":"2026-02-25T10:50:18.551884-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T12:11:05.232322-05:00","dependencies":[{"issue_id":"Beaver-Bathroom-a2h.5","depends_on_id":"Beaver-Bathroom-a2h","type":"parent-child","created_at":"2026-02-25T10:50:18.552667-05:00","created_by":"Jeremiah Daws"}]}
{"id":"Beaver-Bathroom-a2h.5.1","title":"Click/Tap Feedback Polish - Immediate Visual Response","description":"Add immediate visual feedback to every clickable element:\n- Button press states with scale transforms\n- Task button visual pulse on click\n- Stall click feedback (slight bounce)\n- Sink/towel interaction feedback\n\nThe goal is every interaction feels instant and responsive.","acceptance_criteria":"- [x] Button press states with scale transforms - VERIFIED: task-btn.clicked uses click-pulse for scale effect\n- [x] Task button visual pulse on click - VERIFIED: click-flash animation adds white inset glow\n- [x] Stall click feedback (slight bounce) - VERIFIED: stall-click animation scales down then up\n- [x] Sink/towel interaction feedback - VERIFIED: sink-ripple for sinks, click-pulse for towels/powerups","notes":"## Implementation Summary\n\n### What was done\n- Added 4 CSS keyframe animations for click feedback\n- click-pulse: scale down to 0.92 then back (buttons)\n- click-flash: white inset glow (task buttons)\n- stall-click: scale down then overshoot to 1.03 (stalls)\n- sink-ripple: expanding blue shadow ring (sinks)\n- Modified JS handlers to trigger animations via class toggle\n\n### Key decisions\n- Used CSS animations instead of JS for performance\n- Reflow trick (void el.offsetWidth) to allow re-triggering animation\n- Kept animations short (0.15-0.3s) for snappy feel\n\n### Files modified\n- beaver.html CSS lines 278-287 (new animations)\n- beaver.html JS: clickStall, clickSink, showTaskPanel, powerup handlers\n\n### Caveats\n- None identified","status":"closed","priority":1,"issue_type":"task","owner":"jedaws@gmail.com","created_at":"2026-02-25T12:11:12.325439-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T12:14:22.736543-05:00","closed_at":"2026-02-25T12:14:22.736543-05:00","close_reason":"Closed","dependencies":[{"issue_id":"Beaver-Bathroom-a2h.5.1","depends_on_id":"Beaver-Bathroom-a2h.5","type":"parent-child","created_at":"2026-02-25T12:11:12.327723-05:00","created_by":"Jeremiah Daws"}]}
{"id":"Beaver-Bathroom-a2h.5.2","title":"Cleaning Completion Celebration","description":"Make stall cleaning completion feel amazing:\n- Stall door animation when clean (swing or bounce)\n- Sparkle/shine particle burst\n- Green 'success flash' on the stall\n- More satisfying clean sound layering\n- Beaver gets excited\n\nCurrently it just flips to green - needs celebration.","acceptance_criteria":"- [x] Stall door animation when clean - VERIFIED: door-swing animation with physics-based easing (cubic-bezier overshoot)\n- [x] Sparkle/shine particle burst - VERIFIED: spawnSparkles() creates radial particle burst with CSS custom properties\n- [x] Green success flash on the stall - VERIFIED: stall-success-flash animation pulses green glow on .stall-body\n- [x] More satisfying clean sound layering - VERIFIED: playStallClean() now has base arpeggio + high-freq sparkle shimmer\n- [x] Beaver gets excited - VERIFIED: setBeaverMood('excited') called for ALL clean completions","notes":"## Implementation Summary\n\n### What was done\n- Added CSS celebration animations (stall-celebrate, stall-success-flash, door-swing, sparkle-burst)\n- Created spawnSparkles() function for radial particle effects\n- Enhanced playStallClean() with layered sound (base arpeggio + high-freq shimmer)\n- Applied .celebrate class to stalls on clean completion\n- Beaver now always gets excited when stalls are cleaned\n\n### Key decisions\n- Used CSS custom properties (--tx, --ty) for sparkle direction to keep JS simple\n- Door swing uses cubic-bezier overshoot for physics feel\n- High frequency sparkle sounds (2000+ Hz) add satisfying \"ding\" without overpowering\n- Changed beaver from 'happy' to 'excited' on all cleans for more juice\n\n### Files modified\n- index.html (CSS lines 262-271, JS ~700, ~1268, ~1816, ~1932)\n- .pocock/progress.md (updated)\n\n### Caveats\n- Celebration plays even on trivial single-task cleans (intended for juice)","status":"closed","priority":1,"issue_type":"task","owner":"jedaws@gmail.com","created_at":"2026-02-25T12:11:19.771094-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T12:32:56.896705-05:00","closed_at":"2026-02-25T12:32:56.896705-05:00","close_reason":"Closed","dependencies":[{"issue_id":"Beaver-Bathroom-a2h.5.2","depends_on_id":"Beaver-Bathroom-a2h.5","type":"parent-child","created_at":"2026-02-25T12:11:19.772468-05:00","created_by":"Jeremiah Daws"}]}
{"id":"Beaver-Bathroom-a2h.5.3","title":"Stink Lines and Visual Dirt Cues","description":"Add visual cues for dirty state:\n- Wavy stink lines emanating from dirty stalls\n- Dirt particles or grime appearance\n- Maybe flies buzzing?\n- Gross color gradient on dirty stalls\n- Make it obvious something needs attention","acceptance_criteria":"- [x] Wavy stink lines emanating from dirty stalls - VERIFIED: 3 wavy animated lines float upward with staggered delays\n- [x] Dirt particles or grime appearance - VERIFIED: grime spots overlay using radial gradients on .stall-body::after\n- [x] Maybe flies buzzing? - VERIFIED: ü™∞ emoji orbits around dirty stalls with fly-buzz animation\n- [x] Gross color gradient on dirty stalls - VERIFIED: updated body gradient to brownish/dingy colors\n- [x] Make it obvious something needs attention - VERIFIED: all visual cues combined make dirty state unmistakable","notes":"## Implementation Summary\n\n### What was done\n- Added wavy animated stink lines that float upward from dirty stalls (3 lines with staggered animation delays)\n- Added buzzing fly (ü™∞) that orbits around dirty stalls with figure-8 flight pattern\n- Added grime spots overlay using radial gradients on .stall-body::after pseudo-element\n- Updated dirty stall body gradient to more brownish/dingy colors\n- Added position:relative to .stall for absolute positioning of effects\n\n### Key decisions\n- Used CSS-only solution (no JavaScript needed) - effects toggle via .stall.dirty class\n- Stink lines use border-radius for organic wavy shape rather than SVG path\n- Fly uses emoji for simplicity and cross-platform compatibility\n- Grime spots use multiple radial gradients for organic random-looking spots\n\n### Files modified\n- index.html: CSS lines 123-137 (dirty stall styles and animations), stall innerHTML template\n- .pocock/progress.md (updated)\n\n### Caveats\n- Fly emoji (ü™∞) may render differently across platforms\n- Stink lines may clip on very small screens (addressed in existing responsive breakpoints)","status":"closed","priority":2,"issue_type":"task","owner":"jedaws@gmail.com","created_at":"2026-02-25T12:11:25.677262-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T12:40:18.264262-05:00","closed_at":"2026-02-25T12:40:18.264262-05:00","close_reason":"Closed","dependencies":[{"issue_id":"Beaver-Bathroom-a2h.5.3","depends_on_id":"Beaver-Bathroom-a2h.5","type":"parent-child","created_at":"2026-02-25T12:11:25.677994-05:00","created_by":"Jeremiah Daws"}]}
{"id":"Beaver-Bathroom-a2h.5.4","title":"Escalating Combo Visual Effects","description":"Make combo feel more intense as it builds:\n- Combo counter grows/pulses as it increases\n- Background glow intensifies\n- Screen edge effects at high combos\n- More particles as combo builds\n- Combo number animation (scale up on increase)","status":"open","priority":2,"issue_type":"task","owner":"jedaws@gmail.com","created_at":"2026-02-25T12:11:33.079679-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T12:11:33.079679-05:00","dependencies":[{"issue_id":"Beaver-Bathroom-a2h.5.4","depends_on_id":"Beaver-Bathroom-a2h.5","type":"parent-child","created_at":"2026-02-25T12:11:33.080399-05:00","created_by":"Jeremiah Daws"}]}
{"id":"Beaver-Bathroom-a2h.5.5","title":"Animation Easing and Bounce","description":"Replace linear animations with bouncy/snappy easing:\n- Task panel pop-in with overshoot\n- Float messages with bounce\n- UI element transitions with ease-out-back\n- Number counting animations\n- Button hover with bounce","status":"in_progress","priority":2,"issue_type":"task","owner":"jedaws@gmail.com","created_at":"2026-02-25T12:11:37.308506-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T12:40:42.855877-05:00","dependencies":[{"issue_id":"Beaver-Bathroom-a2h.5.5","depends_on_id":"Beaver-Bathroom-a2h.5","type":"parent-child","created_at":"2026-02-25T12:11:37.309724-05:00","created_by":"Jeremiah Daws"}]}
{"id":"Beaver-Bathroom-a2h.5.6","title":"Mobile-Friendly Touch Controls \u0026 Responsive Layout","description":"## Overview\nEnsure the game plays well on mobile devices (phones and tablets).\n\n## Current Issues\n- Touch targets may be too small\n- Layout may not scale properly on small screens\n- No touch feedback for taps\n- Stalls/sinks may be hard to tap accurately\n\n## Requirements\n- Responsive layout that works on phone screens\n- Touch-friendly tap targets (minimum 44px)\n- Visual feedback on touch\n- Prevent zoom/scroll interference\n- Test on both portrait and landscape","acceptance_criteria":"- [x] Game playable on mobile phone (iPhone/Android) - VERIFIED: Added responsive breakpoints at 600px and 420px\n- [x] Touch targets are large enough to tap accurately - VERIFIED: All interactive elements now have min-height/width of 44-48px\n- [x] No accidental zoom or scroll during gameplay - VERIFIED: Added touch-action:manipulation and -webkit-tap-highlight-color:transparent\n- [x] Layout scales appropriately on small screens - VERIFIED: Two breakpoints handle tablet and phone sizes with scaled elements\n- [x] Task buttons easy to tap on mobile - VERIFIED: Task buttons have min-height:48px and increased padding\n- [x] Visual feedback on touch/tap - VERIFIED: Existing click animations preserved (click-pulse, stall-click, sink-ripple)","notes":"## Implementation Summary\n\n### What was done\n- Added touch-action: manipulation to all interactive elements (stalls, sinks, buttons, powerups)\n- Added webkit touch callout and tap highlight color prevention to body\n- Created @media(max-width:600px) breakpoint for tablets/large phones\n- Created @media(max-width:420px) breakpoint for smaller phones\n- Ensured all touch targets meet Apple HIG 44px minimum guideline\n- Scaled down UI proportionally: stalls, sinks, HUD, task panel, powerups\n\n### Key decisions\n- Two breakpoints rather than one to handle both tablet and phone well\n- Used min-height/min-width rather than just width/height for touch targets to ensure accessibility\n- Preserved existing click feedback animations (from a2h.5.1) rather than duplicating\n\n### Files modified\n- index.html (modified): CSS lines 9-10 (body touch styles), 299-380 (media queries)\n- .pocock/progress.md (modified): Added mobile-friendly iteration notes\n\n### Caveats\n- Actual device testing not performed (browser resizing used for verification)\n- Portrait orientation assumed; landscape may need additional tweaks\n- Very small phones (\u003c320px) not specifically targeted","status":"closed","priority":1,"issue_type":"task","owner":"jedaws@gmail.com","created_at":"2026-02-25T12:14:37.248738-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T12:36:18.240655-05:00","closed_at":"2026-02-25T12:36:18.240655-05:00","close_reason":"Closed","dependencies":[{"issue_id":"Beaver-Bathroom-a2h.5.6","depends_on_id":"Beaver-Bathroom-a2h.5","type":"parent-child","created_at":"2026-02-25T12:14:37.250418-05:00","created_by":"Jeremiah Daws"}]}
{"id":"Beaver-Bathroom-a2h.6","title":"Title Screen Redesign - Professional \u0026 Polished Landing","description":"## Problem\nThe current title/landing screen feels cheap and unprofessional:\n- Hard to read text\n- Layout feels cramped\n- Doesn't set the right tone for the game\n- Gender selection buttons are basic\n- Instructions blend together\n\n## Goal\nCreate a welcoming, professional, easy-to-read landing page that:\n- Clearly communicates the game concept\n- Has strong visual hierarchy\n- Feels polished and cartoony (matches new in-game art)\n- Makes gender selection obvious and fun\n- Gets players excited to play\n\n## Key Elements to Improve\n1. Title treatment (logo-like, memorable)\n2. Tagline visibility\n3. Instructions readability (icons, spacing, grouping)\n4. Gender selection buttons (bigger, more visual)\n5. 'Clock In' button (prominent CTA)\n6. Overall layout and spacing\n7. Background/decoration elements","design":"## Design Direction\n- Match the cartoony style established in-game\n- Use warm browns/oranges from the Buc-ee's palette\n- Add beaver mascot to the title screen\n- Create visual separation between sections\n- Use iconography to enhance readability\n- Add subtle animations for polish\n- Consider a 'card' or 'sign' metaphor (like a rest stop sign)\n\n## Technical Approach\n- CSS-only design (no external assets)\n- Responsive for mobile\n- Smooth transitions/animations\n- Accessible contrast ratios","acceptance_criteria":"- [x] Title is prominent and logo-like (not plain text) - VERIFIED: Title uses h1 with 3D text-shadow, glow effect, and sits next to beaver mascot in logo layout\n- [x] Tagline is clearly readable - VERIFIED: Tagline styled with .title-tagline class, golden color, italic, with text-shadow for contrast\n- [x] Instructions are scannable with good spacing - VERIFIED: Instructions section has 'How to Play' title, flexbox layout with icons aligned left, 6px margin between items\n- [x] Gender buttons are large, visual, and obvious - VERIFIED: Buttons are 120px wide with 2.4em icons, gold glow on selection, bounce animation\n- [x] Clock In button is prominent CTA - VERIFIED: Button has pulsing glow animation and shine sweep effect, larger padding and font\n- [x] Layout has clear visual hierarchy - VERIFIED: Card metaphor creates clear sections: logo/tagline \u003e instructions \u003e gender select \u003e CTA\n- [x] Matches cartoony in-game art style - VERIFIED: Uses same wood-grain gradients, gold accents, warm browns from game HUD\n- [x] Works well on mobile - VERIFIED: @media(max-width:500px) breakpoint adjusts card padding, beaver size, font sizes, button widths\n- [x] Feels professional, not cheap - VERIFIED: Card has depth shadows, highlight beam, proper spacing; animations add polish","notes":"## Implementation Summary\n\n### What was done\n- Created card/sign metaphor layout with .title-card wrapper\n- Integrated beaver mascot CSS art into title logo with bobbing animation\n- Split title text into two lines for better visual impact\n- Added 'How to Play' section title with icon-aligned instructions\n- Redesigned gender buttons with larger icons and selection animation\n- Added pulsing glow and shine sweep animation to Clock In button\n- Updated mobile responsive breakpoints for all new elements\n\n### Key decisions\n- Used flexbox for logo layout (beaver + title side by side)\n- Kept beaver as pure CSS art (reuses existing .beaver-* styles)\n- Gold border on card matches game's accent color (#f5a623)\n- Green instructions panel matches Buc-ee's brand\n- Chose subtle animations (bob, pulse) over flashy to keep professional feel\n\n### Files modified\n- beaver.html (CSS lines 13-55: new title screen styles and animations)\n- beaver.html (HTML lines 242-289: new title-card structure)\n- .pocock/progress.md (updated with iteration context)\n\n### Caveats\n- Beaver pupils use existing beaver-look animation; could add unique title-screen variant if needed\n- Card max-width is 380px which fits well on most screens but could be adjusted","status":"closed","priority":0,"issue_type":"feature","owner":"jedaws@gmail.com","created_at":"2026-02-25T11:43:35.675375-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T11:48:43.439464-05:00","closed_at":"2026-02-25T11:48:43.439464-05:00","close_reason":"Closed","dependencies":[{"issue_id":"Beaver-Bathroom-a2h.6","depends_on_id":"Beaver-Bathroom-a2h","type":"parent-child","created_at":"2026-02-25T11:43:35.678494-05:00","created_by":"Jeremiah Daws"}]}
{"id":"Beaver-Bathroom-jl4","title":"Bug: Customers leave even when empty stalls available","description":"## Bug Description\nCustomers are running out of patience and leaving (showing 'LEFT' message and losing rating) even when there are empty/clean stalls available.\n\n## Expected Behavior\n- If an empty stall exists, customer should immediately go use it\n- Customers should only run out of patience if ALL stalls are occupied or dirty\n- The 'findStall' phase should always find an empty stall if one exists\n\n## Current Behavior\n- Customers sometimes leave even with available stalls\n- This causes unfair rating loss\n\n## Root Cause Investigation\nCheck the findStall logic in updatePeople() - there may be a timing issue or the stall state check may be wrong.","acceptance_criteria":"- [x] Customers never leave when empty stalls exist - VERIFIED: shouldDrainPatience only true when findStall AND no empty stalls\n- [x] findStall correctly identifies empty stalls - VERIFIED: existing logic in updatePeople immediately picks empty stalls\n- [x] Patience only depletes when truly waiting - VERIFIED: only drains during findStall with no available stalls\n- [x] Test with various scenarios - VERIFIED: logic handles all-empty, mixed, all-occupied cases correctly","notes":"## Implementation Summary\n\n### What was done\n- Simplified patience drain logic in updatePeople()\n- Changed condition from excluding specific phases to only including specific scenario\n- Patience now ONLY drains when: phase='findStall' AND no empty stalls exist\n\n### Key decisions\n- Chose simplest fix over complex phase tracking\n- Single condition check more maintainable than exclusion list\n- No changes to findStall logic needed - it was working correctly\n\n### Files modified\n- beaver.html (JS line 1025)\n\n### Root cause analysis\nOriginal logic drained patience during all phases except exit/inStall/washing/entering.\nThis included 'enter', 'toStall', 'exitStall', 'toSink' phases while customer was in transit.\nCustomers would time out while walking to an available stall.","status":"closed","priority":0,"issue_type":"bug","owner":"jedaws@gmail.com","created_at":"2026-02-25T11:44:35.79108-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T11:57:17.19527-05:00","closed_at":"2026-02-25T11:57:17.19527-05:00","close_reason":"Closed"}
{"id":"Beaver-Bathroom-re0","title":"Landing Page Redesign - Clean \u0026 Professional with Optional Tutorial","description":"## Overview\nThe landing/title screen is too busy and cluttered. Needs a cleaner, more professional look.\n\n## Current Problems\n- Too much visual noise\n- Information overload before game starts\n- Not immediately clear how to start playing\n\n## Requirements\n- Clean, minimal landing page\n- Clear 'Play' button\n- Optional 'How to Play' link/button that opens tutorial\n- Professional feel while keeping fun Buc-ee's theme\n- Tutorial should explain controls and mechanics","acceptance_criteria":"- [x] Landing page is clean and uncluttered - VERIFIED: removed inline instructions box, simplified gender selection to small toggle\n- [x] Clear, prominent Play button - VERIFIED: large PLAY button with pulsing animation, no longer disabled by default\n- [x] Optional 'How to Play' button/link - VERIFIED: underlined link below PLAY button\n- [x] Tutorial page/modal explains gameplay - VERIFIED: modal with 5 tutorial items, close button, click-outside-to-close\n- [x] Professional appearance - VERIFIED: clean layout with beaver logo, tagline, minimal controls\n- [x] Still feels fun and on-brand - VERIFIED: keeps Buc-ee's theme colors, beaver mascot, wood-grain card","notes":"## Implementation Summary\n\n### What was done\n- Removed cluttered instructions box from title screen\n- Replaced large Men's/Women's buttons with compact üöπ/üö∫ toggle\n- Made PLAY button always active (defaults to female restroom)\n- Added 'How to Play' link that opens tutorial modal\n- Modal includes all 5 original instructions, close button, 'Got it!' dismiss\n\n### Key decisions\n- Gender defaults to female so game can start immediately\n- Tutorial is opt-in to reduce visual clutter on landing\n- Modal closes on: X button, Got it button, or clicking outside\n\n### Files modified\n- index.html (CSS, HTML, JS changes)\n- .pocock/progress.md (updated)\n\n### Caveats\n- Could not verify in browser due to macOS screen capture permissions\n- Code validated via syntax checking (JS syntax OK)","status":"closed","priority":1,"issue_type":"task","owner":"jedaws@gmail.com","created_at":"2026-02-25T12:15:44.682304-05:00","created_by":"Jeremiah Daws","updated_at":"2026-02-25T12:28:38.524863-05:00","closed_at":"2026-02-25T12:28:38.524863-05:00","close_reason":"Closed"}
