<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Beaver's Bathroom Blitz</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¦«</text></svg>">
<link rel="stylesheet" href="/src/styles.css">
<link rel="stylesheet" href="/src/UIOverlay.css">
<script src="https://js.stripe.com/v3/"></script>
</head>
<body>
<div id="game-container">
  <div id="title-screen" class="screen active">
    <div class="title-card">
      <!-- Hero section: beaver + title grouped tight -->
      <div class="title-hero">
        <img src="/images/beaver-logo.png" alt="Beaver Mascot" class="title-beaver-img">
        <h1>BEAVER'S<br>BATHROOM BLITZ</h1>
        <p class="title-tagline">The cleanest restrooms in Texas!</p>
      </div>

      <!-- Orientation intro -->
      <div class="title-info">
        <p class="title-welcome">Welcome to the Team!</p>
        <p class="title-subtitle">Your first day at Beaver's Travel Stop.<br>Survive 6 shifts for the <span class="golden-plunger">ğŸ† Golden Plunger</span>!</p>
        <p class="high-score" id="title-high-score">ğŸ† High Score: <span id="high-score-val">0</span></p>
      </div>

      <!-- Slim progress bar -->
      <div class="player-rank-display" id="player-rank-display">
        <div class="rank-row">
          <span class="rank-badge" id="player-rank"><span class="rank-icon">ğŸ§¹</span> Trainee</span>
          <span class="rank-xp" id="rank-xp">0 / 500 XP</span>
        </div>
        <div class="rank-progress-bar"><div class="rank-progress-fill" id="rank-progress-fill"></div></div>
      </div>

      <!-- Restroom selector - segmented control -->
      <div class="restroom-selector">
        <button class="restroom-btn" data-gender="male">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C13.1 2 14 2.9 14 4S13.1 6 12 6 10 5.1 10 4 10.9 2 12 2ZM10.5 7H13.5C14.6 7 15.5 7.9 15.5 9V14.5H14V22H10V14.5H8.5V9C8.5 7.9 9.4 7 10.5 7Z"/></svg>
          <span>Men's</span>
        </button>
        <button class="restroom-btn selected" data-gender="female">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C13.1 2 14 2.9 14 4S13.1 6 12 6 10 5.1 10 4 10.9 2 12 2ZM14.5 7H9.5C8.4 7 7.5 7.9 7.5 9V14.5H9.5V16H8V18H9.5V22H11V18H13V22H14.5V18H16V16H14.5V14.5H16.5V9C16.5 7.9 15.6 7 14.5 7Z"/></svg>
          <span>Women's</span>
        </button>
      </div>

      <!-- Big PLAY button -->
      <button class="btn btn-play" id="start-btn">PLAY</button>

      <!-- Icon dock for menu items -->
      <div class="title-dock">
        <div class="dock-item">
          <button class="dock-btn" id="leaderboard-btn">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/></svg>
          </button>
          <span class="dock-label">Ranks</span>
        </div>
        <div class="dock-item">
          <button class="dock-btn" id="achievements-btn">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 2H4C2.9 2 2 2.9 2 4V8C2 8.55 2.45 9 3 9H4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V9H21C21.55 9 22 8.55 22 8V4C22 2.9 21.1 2 20 2ZM18 20H6V9H18V20ZM20 7H4V4H20V7ZM13 11H11V14H8V16H11V19H13V16H16V14H13V11Z"/></svg>
          </button>
          <span class="dock-label">Badges</span>
        </div>
        <div class="dock-item">
          <button class="dock-btn" id="daily-btn">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H18V1H16V3H8V1H6V3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V8H19V19ZM9 10H7V12H9V10ZM13 10H11V12H13V10ZM17 10H15V12H17V10ZM9 14H7V16H9V14ZM13 14H11V16H13V14Z"/></svg>
          </button>
          <span class="dock-label">Daily</span>
        </div>
        <div class="dock-item">
          <button class="dock-btn" id="title-settings-btn">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19.14 12.94C19.18 12.64 19.2 12.33 19.2 12C19.2 11.68 19.18 11.36 19.13 11.06L21.16 9.48C21.34 9.34 21.39 9.07 21.28 8.87L19.36 5.55C19.24 5.33 18.99 5.26 18.77 5.33L16.38 6.29C15.88 5.91 15.35 5.59 14.76 5.35L14.4 2.81C14.36 2.57 14.16 2.4 13.92 2.4H10.08C9.84 2.4 9.65 2.57 9.61 2.81L9.25 5.35C8.66 5.59 8.12 5.92 7.63 6.29L5.24 5.33C5.02 5.25 4.77 5.33 4.65 5.55L2.74 8.87C2.62 9.08 2.66 9.34 2.86 9.48L4.89 11.06C4.84 11.36 4.8 11.69 4.8 12C4.8 12.31 4.82 12.64 4.87 12.94L2.84 14.52C2.66 14.66 2.61 14.93 2.72 15.13L4.64 18.45C4.76 18.67 5.01 18.74 5.23 18.67L7.62 17.71C8.12 18.09 8.65 18.41 9.24 18.65L9.6 21.19C9.65 21.43 9.84 21.6 10.08 21.6H13.92C14.16 21.6 14.36 21.43 14.39 21.19L14.75 18.65C15.34 18.41 15.88 18.09 16.37 17.71L18.76 18.67C18.98 18.75 19.23 18.67 19.35 18.45L21.27 15.13C21.39 14.91 21.34 14.66 21.15 14.52L19.14 12.94ZM12 15.6C10.02 15.6 8.4 13.98 8.4 12C8.4 10.02 10.02 8.4 12 8.4C13.98 8.4 15.6 10.02 15.6 12C15.6 13.98 13.98 15.6 12 15.6Z"/></svg>
          </button>
          <span class="dock-label">Settings</span>
        </div>
      </div>

      <!-- Premium + How to Play + Overtime -->
      <div class="title-secondary">
        <button class="btn-help" id="help-btn">â“ How to Play</button>
        <button class="btn-help" id="overtime-btn">â° Overtime</button>
        <button class="btn-help btn-unlock-premium" id="unlock-premium-btn">ğŸ”“ Unlock Premium</button>
      </div>

      <!-- Legal footer -->
      <div class="title-footer">
        <div class="footer-links">
          <button class="footer-link" id="privacy-btn">Privacy</button>
          <span class="footer-sep">Â·</span>
          <button class="footer-link" id="terms-btn">Terms</button>
          <span class="footer-sep">Â·</span>
          <a href="mailto:jeremiah@getsafefamily.com" class="footer-link">Contact</a>
        </div>
      </div>
    </div>

    <!-- Leaderboard Panel -->
    <div id="leaderboard-panel" class="leaderboard-panel">
      <div class="lb-header">
        <h3>ğŸ† Global Leaderboard</h3>
        <button class="lb-close" id="leaderboard-close">&times;</button>
      </div>
      <div id="leaderboard-list" class="lb-list">
        <div class="lb-empty">Loading...</div>
      </div>
    </div>
  </div>

  <div id="tutorial-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <span class="modal-title">ğŸ¦« How to Play</span>
        <button class="modal-close" id="close-tutorial">&times;</button>
      </div>
      <div class="tutorial-body">
        <div class="tutorial-item"><span class="tutorial-icon">ğŸ‘‹</span><span>You're the new hire! Survive 6 shifts for the Golden Plunger.</span></div>
        <div class="tutorial-item"><span class="tutorial-icon">ğŸš½</span><span>Click dirty stalls, then MASH tasks to clean faster!</span></div>
        <div class="tutorial-item"><span class="tutorial-icon">ğŸš¿</span><span>Scrub those sinks - travelers notice everything!</span></div>
        <div class="tutorial-item"><span class="tutorial-icon">â­</span><span>Keep 5 stars or get fired! Each angry customer hurts your rating.</span></div>
      </div>
      <button class="btn" id="tutorial-got-it">Got it!</button>
    </div>
  </div>

  <div id="settings-modal" class="modal">
    <div class="modal-content settings-content">
      <div class="modal-header">
        <span class="modal-title">âš™ï¸ Settings</span>
        <button class="modal-close" id="close-settings">&times;</button>
      </div>
      <div class="settings-body">
        <div class="setting-row">
          <label class="setting-label"><span class="setting-icon">ğŸ”Š</span> Sound Effects</label>
          <div class="slider-wrap">
            <input type="range" id="sfx-volume" min="0" max="100" value="70" class="volume-slider">
            <span class="volume-val" id="sfx-val">70%</span>
          </div>
        </div>
        <div class="setting-row">
          <label class="setting-label"><span class="setting-icon">ğŸµ</span> Music</label>
          <div class="slider-wrap">
            <input type="range" id="music-volume" min="0" max="100" value="50" class="volume-slider">
            <span class="volume-val" id="music-val">50%</span>
          </div>
        </div>
        <div class="setting-row setting-toggle">
          <label class="setting-label"><span class="setting-icon">ğŸ”‡</span> Mute All</label>
          <button id="master-mute" class="toggle-btn">OFF</button>
        </div>
        <div class="setting-row setting-toggle">
          <label class="setting-label"><span class="setting-icon">ğŸ“³</span> Haptics</label>
          <button id="haptics-toggle" class="toggle-btn active">ON</button>
        </div>
      </div>
    </div>
  </div>

  <div id="achievements-modal" class="modal">
    <div class="modal-content achievements-content">
      <div class="modal-header">
        <span class="modal-title">ğŸ–ï¸ Badges <span id="achievements-count" class="ach-counter">0/0</span></span>
        <button class="modal-close" id="close-achievements">&times;</button>
      </div>
      <div id="achievements-grid" class="achievements-grid"></div>
    </div>
  </div>

  <!-- Daily Reward Modal -->
  <div id="daily-reward-modal" class="modal">
    <div class="modal-content daily-reward-content">
      <div class="dr-header">
        <div class="dr-mascot">ğŸ¦«</div>
        <div class="dr-title">Daily Reward!</div>
      </div>
      <div class="dr-info">
        <div class="dr-day">Day <span id="dr-day-num">1</span></div>
        <div class="dr-streak-row">
          <span class="dr-streak-label">ğŸ”¥ Streak:</span>
          <span id="dr-streak" class="dr-streak-val">1</span>
          <span id="dr-streak-badge" class="dr-streak-badge"></span>
        </div>
      </div>
      <div id="dr-calendar" class="dr-calendar"></div>
      <div class="dr-reward">
        <div class="dr-coins" id="dr-coins">+25 ğŸª™</div>
        <div id="dr-bonus" class="dr-bonus"></div>
      </div>
      <button id="dr-claim-btn" class="btn btn-primary dr-claim">Claim Reward!</button>
    </div>
  </div>

  <!-- Paywall Modal -->
  <div id="paywall-modal" class="modal">
    <div class="modal-content paywall-content">
      <!-- Info view (shown before checkout) -->
      <div id="pw-info-view">
        <div class="pw-header">
          <div class="pw-mascot">ğŸ¦«</div>
          <div class="pw-title">You're a Natural!</div>
        </div>
        <div class="pw-body">
          <p class="pw-message">You've completed 3 shifts and proven yourself as a bathroom attendant!</p>
          <p class="pw-unlock">Unlock the full game to continue your journey to the <span class="golden-plunger">ğŸ† Golden Plunger</span>!</p>
          <div class="pw-features">
            <div class="pw-feature"><span class="pw-icon">ğŸš½</span> Shifts 4-6 with increasing challenge</div>
            <div class="pw-feature"><span class="pw-icon">ğŸ‘‘</span> VIP customers with 2x rewards</div>
            <div class="pw-feature"><span class="pw-icon">ğŸ›’</span> Supply Shop upgrades</div>
            <div class="pw-feature"><span class="pw-icon">ğŸ</span> Daily login rewards</div>
            <div class="pw-feature"><span class="pw-icon">ğŸ–ï¸</span> Badges & leaderboard</div>
          </div>
        </div>
        <div class="pw-price">
          <span class="pw-amount">$2.99</span>
          <span class="pw-once">one-time purchase</span>
        </div>
        <p class="pw-refund-note">7-day refund guarantee â€¢ Secure payment via Stripe</p>
        <button id="pw-purchase-btn" class="btn btn-play pw-btn">Unlock Full Game</button>
        <!-- Coupon code section -->
        <div class="pw-code-section">
          <button id="pw-show-code-btn" class="btn-help pw-code-toggle">Have a code?</button>
          <div id="pw-code-input-area" class="pw-code-input-area hidden">
            <div class="pw-code-row">
              <input type="text" id="pw-coupon-input" class="pw-code-input" placeholder="Enter code" maxlength="20">
              <button id="pw-redeem-btn" class="btn btn-small pw-redeem-btn">Redeem</button>
            </div>
            <p id="pw-code-error" class="pw-code-error hidden"></p>
          </div>
        </div>
        <button id="pw-restore-btn" class="btn-help pw-restore">Already purchased? Restore</button>
      </div>
      <!-- Restore view (shown when restoring purchase) -->
      <div id="pw-restore-view" style="display:none;">
        <div class="pw-checkout-header">
          <button id="pw-restore-back-btn" class="btn-help pw-back">â† Back</button>
          <span class="pw-checkout-title">Restore Purchase</span>
        </div>
        <div class="pw-restore-body">
          <p class="pw-restore-desc">Enter the email you used when purchasing to restore your premium access.</p>
          <div class="pw-restore-input-row">
            <input type="email" id="pw-restore-email" class="pw-restore-email-input" placeholder="your@email.com" autocomplete="email">
          </div>
          <button id="pw-restore-check-btn" class="btn btn-play pw-btn">Check Purchase</button>
          <p id="pw-restore-status" class="pw-restore-status hidden"></p>
          <p class="pw-restore-help">If you're having trouble, contact <a href="mailto:jeremiah@getsafefamily.com">support</a>.</p>
        </div>
      </div>
      <!-- Checkout view (shown during Stripe checkout) -->
      <div id="pw-checkout-view" style="display:none;">
        <div class="pw-checkout-header">
          <button id="pw-back-btn" class="btn-help pw-back">â† Back</button>
          <span class="pw-checkout-title">Complete Purchase</span>
        </div>
        <div id="checkout-container"></div>
        <div id="checkout-loading" class="pw-loading">
          <div class="loading-spinner"></div>
          <p>Loading secure checkout...</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Resume Game Modal -->
  <div id="resume-modal" class="modal">
    <div class="modal-content resume-content">
      <div class="resume-header">
        <div class="resume-icon">ğŸ¦«</div>
        <div class="resume-title">Game In Progress</div>
      </div>
      <div class="resume-body">
        <p class="resume-message">You have a saved game!</p>
        <div class="resume-stats">
          <div class="resume-stat"><span class="resume-label">Mode:</span> <span id="resume-mode">Shift 1</span></div>
          <div class="resume-stat"><span class="resume-label">Score:</span> <span id="resume-score">0</span></div>
          <div class="resume-stat"><span class="resume-label">Rating:</span> <span id="resume-rating">â­â­â­â­â­</span></div>
        </div>
      </div>
      <div class="resume-buttons">
        <button id="resume-yes" class="btn btn-play">Resume</button>
        <button id="resume-no" class="btn-help">New Game</button>
      </div>
    </div>
  </div>

  <!-- Preview Modal (for locked premium features) -->
  <div id="preview-modal" class="modal">
    <div class="modal-content preview-content">
      <div class="preview-header">
        <span class="preview-icon" id="preview-icon">ğŸ–ï¸</span>
        <span class="preview-title" id="preview-title">Badges</span>
        <span class="preview-tag">Premium</span>
      </div>
      <div class="preview-body">
        <p class="preview-desc" id="preview-desc">Track your progress with achievements!</p>
        <div class="preview-list" id="preview-list"></div>
        <p class="preview-count" id="preview-count">17 achievements to earn!</p>
      </div>
      <button id="preview-unlock-btn" class="btn btn-play preview-btn">Unlock Premium - $2.99</button>
      <button id="preview-close-btn" class="btn-help">Maybe Later</button>
    </div>
  </div>

  <div id="game-screen" class="screen">
    <div id="hud">
      <div class="hud-item hud-rating"><div class="label">Rating</div><div class="value" id="rating">â­â­â­â­â­</div></div>
      <div class="hud-item hud-score"><div class="label">Score</div><div class="value" id="score">0</div></div>
      <div class="hud-item hud-combo"><div class="label">Combo</div><div class="value" id="combo">x1</div></div>
      <div class="hud-item hud-time"><div class="label">Time</div><div class="value" id="timer">1:00</div></div>
      <button id="settings-btn" aria-label="Settings">âš™ï¸</button>
    </div>
    <!-- Hidden elements for JS compatibility -->
    <div id="dirty-count" style="display:none">0</div>
    <div id="dirty-sinks" style="display:none">0</div>
    <div id="beaver-mascot" class="beaver-idle" style="display:none">
      <div id="beaver-speech" class="beaver-speech"></div>
    </div>
    <div id="play-area">
      <div id="bathroom">
        <div id="stalls-row"></div>
        <div id="floor-area">
          <div id="exit-door">ğŸšª</div>
          <div id="mascot-walk" class="hidden"></div>
          <div id="sink-towel-area">
            <div id="sinks-area"></div>
            <div id="towels"><div>ğŸ“„</div><div>TOWELS</div></div>
          </div>
        </div>
      </div>
      <div id="rush-warning">ğŸšŒ TOUR BUS ARRIVING! ğŸšŒ</div>
      <div id="inspector-warning">ğŸ” HEALTH INSPECTOR! ğŸ”</div>
      <div id="pause-overlay"><span>â¸ï¸ PAUSED</span></div>
      <div id="combo-milestone"></div>
      <div id="combo-break">COMBO LOST!</div>
      <div id="task-panel">
        <h3 id="task-title">Stall #1</h3>
        <div class="hint">Click rapidly to clean faster!</div>
        <div id="task-buttons"></div>
      </div>
    </div>
    <div id="powerups">
      <div class="powerup disabled" id="pow-speed">ğŸ¥©<span class="powerup-text"> Brisket</span> <span class="count" id="cnt-speed">0</span></div>
      <div class="powerup disabled" id="pow-slow">ğŸ§Š<span class="powerup-text"> Icee</span> <span class="count" id="cnt-slow">0</span></div>
      <div class="powerup disabled" id="pow-auto">ğŸ¿<span class="powerup-text"> Nuggets</span> <span class="count" id="cnt-auto">0</span></div>
      <div class="powerup disabled" id="pow-mascot">ğŸ¦«<span class="powerup-text"> Beaver</span> <span class="count" id="cnt-mascot">0</span></div>
    </div>
  </div>

  <div id="result-screen" class="screen">
    <h2 id="result-title">Shift Complete!</h2>
    <div id="result-rating"></div>
    <div class="stats-grid" id="result-stats"></div>
    <div class="grade" id="result-grade">S</div>
    <p id="result-comment"></p>
    <div id="pick-section" style="display:none">
      <p style="font-size:0.75em;opacity:0.7;margin-bottom:8px">You earned:</p>
      <div class="pick-row" id="pick-row"></div>
    </div>
    <!-- Premium feature buttons (shown locked for free users) -->
    <div id="result-premium-btns" class="result-premium-btns" style="display:none">
      <button class="btn-result-premium locked" id="result-shop-btn">ğŸ›’ Supply Shop</button>
      <button class="btn-result-premium locked" id="result-badges-btn">ğŸ–ï¸ Badges</button>
    </div>
    <div class="share-row">
      <button class="btn btn-share" id="share-result">ğŸ“¤ Share Score</button>
    </div>
    <button class="btn" id="next-btn">Next Shift</button>
  </div>

  <div id="upgrade-screen" class="screen">
    <div class="upgrade-header">
      <h2>ğŸ§¹ Supply Closet</h2>
      <p class="coins-display"><span class="coin-icon">ğŸª™</span> <span id="coins">0</span></p>
    </div>
    <div class="upgrades-grid" id="upgrades-grid"></div>
    <button id="skip-upgrades">Start Next Shift â†’</button>
  </div>

  <div id="gameover-screen" class="screen">
    <div style="font-size:2.5em" id="go-icon">ğŸš½</div>
    <h2 id="go-title">Game Over</h2>
    <p id="go-msg"></p>
    <div style="font-size:2.2em;color:#f5a623" id="go-score">0</div>
    <p class="high-score visible" id="go-high-score" style="margin-top:5px">High Score: <span id="go-high-score-val">0</span></p>
    <div class="stats-grid" id="go-stats"></div>

    <!-- Name input for leaderboard -->
    <div id="go-name-section" class="go-name-section">
      <p>Submit to global leaderboard:</p>
      <div class="go-name-row">
        <input type="text" id="go-name-input" placeholder="Your name" maxlength="20">
        <button class="btn btn-small" id="go-submit-score">Submit</button>
      </div>
    </div>

    <!-- Leaderboard display -->
    <div id="leaderboard-section" class="leaderboard-section" style="display:none">
      <h4>ğŸ† Top Scores</h4>
      <div id="leaderboard-list" class="lb-list"></div>
    </div>

    <div class="share-row">
      <button class="btn btn-share" id="share-gameover">ğŸ“¤ Share Score</button>
    </div>
    <button class="btn" id="retry-btn">Try Again</button>
  </div>

  <!-- Privacy Policy Modal -->
  <div id="privacy-modal" class="modal">
    <div class="modal-content legal-content">
      <div class="modal-header">
        <span class="modal-title">ğŸ”’ Privacy Policy</span>
        <button class="modal-close" id="close-privacy">&times;</button>
      </div>
      <div class="legal-body">
        <p class="legal-updated">Last updated: February 2026</p>

        <h4>What We Collect</h4>
        <p>Beaver's Bathroom Blitz collects minimal data:</p>
        <ul>
          <li><strong>Gameplay data:</strong> High scores, achievements, and game progress stored locally on your device (localStorage)</li>
          <li><strong>Purchase info:</strong> When you buy premium, Stripe processes your payment. We receive confirmation but never see your card details</li>
          <li><strong>Leaderboard:</strong> If you submit a score, we store your chosen display name and score on our servers</li>
        </ul>

        <h4>How We Use Your Data</h4>
        <ul>
          <li>To save your game progress and preferences</li>
          <li>To verify premium purchases for restoration</li>
          <li>To display global leaderboards</li>
        </ul>

        <h4>Third-Party Services</h4>
        <ul>
          <li><strong>Stripe:</strong> Handles payment processing. See <a href="https://stripe.com/privacy" target="_blank" rel="noopener">Stripe's Privacy Policy</a></li>
          <li><strong>Convex:</strong> Stores leaderboard and premium verification data. See <a href="https://www.convex.dev/privacy" target="_blank" rel="noopener">Convex Privacy Policy</a></li>
        </ul>

        <h4>Your Rights</h4>
        <p>You can clear your local data anytime by clearing your browser's localStorage. To request deletion of leaderboard data or purchase records, contact us.</p>

        <h4>Children's Privacy</h4>
        <p>This game does not knowingly collect data from children under 13. The game content is suitable for all ages.</p>

        <h4>Contact</h4>
        <p>Questions? Email <a href="mailto:jeremiah@getsafefamily.com">jeremiah@getsafefamily.com</a></p>
      </div>
    </div>
  </div>

  <!-- Terms of Service Modal -->
  <div id="terms-modal" class="modal">
    <div class="modal-content legal-content">
      <div class="modal-header">
        <span class="modal-title">ğŸ“œ Terms of Service</span>
        <button class="modal-close" id="close-terms">&times;</button>
      </div>
      <div class="legal-body">
        <p class="legal-updated">Last updated: February 2026</p>

        <h4>Agreement</h4>
        <p>By playing Beaver's Bathroom Blitz, you agree to these terms. If you don't agree, please don't play.</p>

        <h4>The Game</h4>
        <ul>
          <li>Beaver's Bathroom Blitz is a browser-based game for entertainment</li>
          <li>We may update, modify, or discontinue the game at any time</li>
          <li>Game progress is stored locally and may be lost if you clear browser data</li>
        </ul>

        <h4>Premium Purchase</h4>
        <ul>
          <li>Premium unlocks additional content for a one-time payment of $2.99</li>
          <li>Payments are processed securely by Stripe</li>
          <li>You can restore purchases using the email associated with your payment</li>
          <li>Premium access is tied to your device/browser unless restored</li>
        </ul>

        <h4>Refund Policy</h4>
        <p>Refunds are available within 7 days of purchase if you haven't substantially used premium features. Contact us to request a refund.</p>

        <h4>Acceptable Use</h4>
        <p>Don't:</p>
        <ul>
          <li>Use automated tools or cheats</li>
          <li>Submit offensive names to leaderboards</li>
          <li>Attempt to hack or exploit the game</li>
          <li>Reverse engineer or redistribute the game</li>
        </ul>

        <h4>Disclaimer</h4>
        <p>This game is an original parody/homage and is not affiliated with, endorsed by, or connected to Buc-ee's Ltd. or any other entity.</p>

        <h4>Limitation of Liability</h4>
        <p>The game is provided "as is" without warranties. We're not liable for any damages from using the game.</p>

        <h4>Contact</h4>
        <p>Questions or concerns? Email <a href="mailto:jeremiah@getsafefamily.com">jeremiah@getsafefamily.com</a></p>
      </div>
    </div>
  </div>

  <!-- Share preview modal -->
  <div id="share-modal" class="modal">
    <div class="modal-content share-content">
      <div class="modal-header">
        <span class="modal-title">ğŸ“¤ Share Your Score</span>
        <button class="modal-close" id="close-share">&times;</button>
      </div>
      <div class="share-preview">
        <canvas id="share-canvas" width="540" height="960"></canvas>
      </div>
      <div class="share-actions">
        <button class="btn btn-share-action" id="share-native">ğŸ“± Share</button>
        <button class="btn btn-share-action btn-secondary" id="share-download">ğŸ’¾ Save Image</button>
      </div>
    </div>
  </div>

  <div id="shift-intro" class="screen">
    <div class="intro-card">
      <div class="intro-shift-num" id="intro-shift-num">SHIFT 1</div>
      <h2 class="intro-title" id="intro-title">Training Day</h2>
      <p class="intro-desc" id="intro-desc">Welcome to Beaver's Travel Stop! Time to learn the ropes.</p>
      <div class="beaver-tip">
        <span class="beaver-tip-icon">ğŸ¦«</span>
        <div class="beaver-tip-content">
          <div class="beaver-tip-label">Beaver says...</div>
          <div class="beaver-tip-text" id="intro-tip">Mash those task buttons fast! Speed is everything.</div>
        </div>
      </div>
      <div class="intro-stats">
        <div class="intro-stat"><span class="intro-stat-icon">ğŸš½</span> <span id="intro-stalls">5</span> Stalls</div>
        <div class="intro-stat"><span class="intro-stat-icon">ğŸš¿</span> <span id="intro-sinks">2</span> Sinks</div>
        <div class="intro-stat"><span class="intro-stat-icon">â±ï¸</span> <span id="intro-time">60</span>s</div>
      </div>
      <button class="btn btn-play" id="shift-start-btn">Let's Go!</button>
    </div>
  </div>

  <!-- Speed Clean Challenge Mini-Game -->
  <div id="minigame-intro" class="screen">
    <div class="minigame-card">
      <div class="minigame-badge">âš¡ BONUS ROUND âš¡</div>
      <h2 class="minigame-title">Speed Clean Challenge!</h2>
      <p class="minigame-desc">Clean as many stalls as possible in 30 seconds!</p>
      <div class="minigame-rules">
        <div class="minigame-rule"><span class="rule-icon">ğŸš½</span> Stalls spawn dirty - click to clean!</div>
        <div class="minigame-rule"><span class="rule-icon">âš¡</span> One-click cleaning - no mashing!</div>
        <div class="minigame-rule"><span class="rule-icon">ğŸª™</span> Earn bonus coins for each clean!</div>
      </div>
      <button class="btn btn-play minigame-start-btn" id="minigame-start-btn">GO!</button>
    </div>
  </div>

  <div id="minigame-screen" class="screen">
    <div id="minigame-hud">
      <div class="minigame-hud-item">
        <div class="minigame-label">TIME</div>
        <div class="minigame-value minigame-timer" id="minigame-timer">30</div>
      </div>
      <div class="minigame-hud-item">
        <div class="minigame-label">CLEANED</div>
        <div class="minigame-value minigame-score" id="minigame-cleaned">0</div>
      </div>
    </div>
    <div id="minigame-area">
      <div id="minigame-stalls"></div>
    </div>
  </div>

  <div id="minigame-result" class="screen">
    <div class="minigame-result-card">
      <div class="minigame-result-badge">âš¡ BONUS COMPLETE âš¡</div>
      <h2 class="minigame-result-title">Speed Clean Results!</h2>
      <div class="minigame-result-stats">
        <div class="minigame-stat">
          <div class="minigame-stat-val" id="minigame-final-cleaned">0</div>
          <div class="minigame-stat-lbl">Stalls Cleaned</div>
        </div>
        <div class="minigame-stat">
          <div class="minigame-stat-val" id="minigame-bonus-coins">0</div>
          <div class="minigame-stat-lbl">Bonus Coins</div>
        </div>
      </div>
      <p class="minigame-comment" id="minigame-comment">Great job!</p>
      <button class="btn" id="minigame-continue-btn">Continue â†’</button>
    </div>
  </div>

  <!-- Supply Run Mini-Game -->
  <div id="supplyrun-intro" class="screen">
    <div class="supplyrun-card">
      <div class="supplyrun-badge">ğŸ“¦ BONUS ROUND ğŸ“¦</div>
      <h2 class="supplyrun-title">Supply Run!</h2>
      <p class="supplyrun-desc">Catch falling supplies before they hit the ground!</p>
      <div class="supplyrun-rules">
        <div class="supplyrun-rule"><span>ğŸ§»</span> Catch supplies = +points</div>
        <div class="supplyrun-rule"><span>ğŸ’©</span> Avoid hazards = bad news</div>
        <div class="supplyrun-rule"><span>âš¡</span> Speed increases over time!</div>
      </div>
      <button class="btn btn-play supplyrun-start-btn" id="supplyrun-start-btn">GO!</button>
    </div>
  </div>

  <div id="supplyrun-screen" class="screen">
    <div id="supplyrun-hud">
      <div class="supplyrun-hud-item">
        <div class="supplyrun-label">TIME</div>
        <div class="supplyrun-value supplyrun-timer" id="supplyrun-timer">30</div>
      </div>
      <div class="supplyrun-hud-item">
        <div class="supplyrun-label">SCORE</div>
        <div class="supplyrun-value supplyrun-score" id="supplyrun-score">0</div>
      </div>
      <div class="supplyrun-hud-item">
        <div class="supplyrun-label">LIVES</div>
        <div class="supplyrun-value supplyrun-lives" id="supplyrun-lives">â¤ï¸â¤ï¸â¤ï¸</div>
      </div>
    </div>
    <div id="supplyrun-area">
      <div id="supplyrun-items"></div>
      <div id="supplyrun-catcher">ğŸ›’</div>
    </div>
  </div>

  <div id="supplyrun-result" class="screen">
    <div class="supplyrun-result-card">
      <div class="supplyrun-result-badge">ğŸ“¦ SUPPLY RUN COMPLETE ğŸ“¦</div>
      <h2 class="supplyrun-result-title">Supply Run Results!</h2>
      <div class="supplyrun-result-stats">
        <div class="supplyrun-stat">
          <div class="supplyrun-stat-val" id="supplyrun-final-caught">0</div>
          <div class="supplyrun-stat-lbl">Supplies Caught</div>
        </div>
        <div class="supplyrun-stat">
          <div class="supplyrun-stat-val" id="supplyrun-bonus-coins">0</div>
          <div class="supplyrun-stat-lbl">Bonus Coins</div>
        </div>
      </div>
      <p class="supplyrun-comment" id="supplyrun-comment">Great job!</p>
      <button class="btn" id="supplyrun-continue-btn">Continue â†’</button>
    </div>
  </div>

</div>

<script type="module" src="/src/main.js"></script>
</body>
</html>
