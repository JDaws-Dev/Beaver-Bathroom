*{margin:0;padding:0;box-sizing:border-box}
body{font-family:system-ui,sans-serif;background:#2d1f0f;color:#eee;overflow:hidden;height:100vh;height:100dvh;display:flex;justify-content:center;align-items:center;user-select:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent;overscroll-behavior:none}
button,.stall,.sink,#towels,.powerup,.task-btn,.gender-opt,.pick-item,.upgrade-card{touch-action:manipulation;-webkit-touch-callout:none}
#game-container{width:100%;max-width:800px;height:100vh;height:100dvh;max-height:900px;display:flex;flex-direction:column;position:relative}
.screen{display:none;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%;position:absolute;inset:0;padding:20px;text-align:center}
.screen.active{display:flex}
#title-screen{background:linear-gradient(180deg,#3d2814 0%,#2d4a1e 60%,#1a3310 100%);gap:0;padding:15px 20px;overflow-y:auto}
.title-card{background:linear-gradient(180deg,#5a4030 0%,#3d2814 50%,#2d1f0f 100%);border:5px solid #f5a623;border-radius:20px;padding:20px 25px 25px;max-width:380px;width:100%;box-shadow:0 8px 30px rgba(0,0,0,0.5),inset 0 2px 4px rgba(255,200,100,0.15),inset 0 -4px 8px rgba(0,0,0,0.3);position:relative}
.title-card::before{content:'';position:absolute;top:8px;left:8px;right:8px;height:2px;background:linear-gradient(90deg,transparent,rgba(255,200,100,0.3),transparent);border-radius:2px}
.title-header{text-align:center;margin-bottom:15px}
.title-logo{display:flex;align-items:center;justify-content:center;gap:10px;margin-bottom:8px}
.title-beaver{width:56px;height:56px;position:relative;animation:title-beaver-bob 2s ease-in-out infinite}
.title-beaver .beaver-face{width:48px;height:44px}
.title-beaver .beaver-ear{width:14px;height:14px;top:0}
.title-beaver .beaver-eye{width:12px;height:12px;top:12px}
.title-beaver .beaver-eye.left{left:8px}
.title-beaver .beaver-eye.right{right:8px}
.title-beaver .beaver-pupil{width:6px;height:6px;animation:beaver-look 3s infinite}
.title-beaver .beaver-nose{width:12px;height:8px;top:22px}
.title-beaver .beaver-mouth{width:16px;height:7px;top:30px}
.title-beaver .beaver-teeth{width:12px;height:7px;top:29px}
.title-beaver .beaver-cheek{width:10px;height:7px;top:20px}
#title-screen h1{font-size:1.7em;color:#f5a623;text-shadow:3px 3px 0 #2a1a0a,-1px -1px 0 #2a1a0a,0 0 25px rgba(245,166,35,0.5);letter-spacing:2px;line-height:1.1;margin:0}
.title-tagline{color:#fdd835;font-style:italic;font-size:0.95em;margin-top:8px;text-shadow:0 2px 4px rgba(0,0,0,0.6)}
.title-subtitle{font-size:0.8em;color:#c9a86c;margin-top:10px;line-height:1.4;text-shadow:0 1px 3px rgba(0,0,0,0.5)}
.golden-plunger{color:#ffd700;text-shadow:0 0 8px rgba(255,215,0,0.6);font-weight:bold}
.high-score{font-size:0.75em;color:#f5a623;margin-top:8px;display:none}
.high-score.visible{display:block}
@keyframes title-beaver-bob{0%,100%{transform:translateY(0) rotate(-2deg)}50%{transform:translateY(-4px) rotate(2deg)}}
.start-section{display:flex;flex-direction:column;align-items:center;gap:12px;margin-top:15px}
.gender-toggle{display:flex;gap:10px;align-items:center}
.gender-label{font-size:0.65em;color:#a08060;text-transform:uppercase;letter-spacing:1px}
.gender-opt{width:44px;height:44px;font-size:1.5em;border:3px solid #5d4037;border-radius:10px;background:linear-gradient(180deg,#4a3828,#2d1f0f);cursor:pointer;transition:all 0.18s cubic-bezier(0.34,1.56,0.64,1);opacity:0.5}
.gender-opt:hover{opacity:0.8;transform:scale(1.05)}
.gender-opt.selected{opacity:1;border-color:#f5a623;background:linear-gradient(180deg,#5a4030,#3d2814);box-shadow:0 0 10px rgba(245,166,35,0.4)}
.btn-play{padding:16px 50px;font-size:1.4em;letter-spacing:3px;animation:start-pulse 1.5s ease-in-out infinite;position:relative;overflow:hidden}
.btn-play::after{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.3),transparent);animation:start-shine 2s ease-in-out infinite}
.btn-help{background:none;border:none;color:#a08060;font-size:0.75em;cursor:pointer;text-decoration:none;opacity:0.7;transition:opacity 0.15s}
.btn-help:hover{opacity:1;color:#c9a86c}
.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.8);z-index:1000;align-items:center;justify-content:center;padding:20px}
.modal.active{display:flex}
.modal-content{background:linear-gradient(180deg,#5a4030 0%,#3d2814 50%,#2d1f0f 100%);border:4px solid #f5a623;border-radius:16px;padding:20px 24px;max-width:360px;width:100%;box-shadow:0 8px 30px rgba(0,0,0,0.6)}
.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
.modal-title{font-size:1.2em;color:#f5a623;font-weight:bold}
.modal-close{background:none;border:none;color:#c9a86c;font-size:1.8em;cursor:pointer;line-height:1}
.modal-close:hover{color:#fff}
.tutorial-body{margin-bottom:20px}
.tutorial-item{display:flex;gap:10px;margin:12px 0;align-items:flex-start;font-size:0.9em;line-height:1.4}
.tutorial-icon{font-size:1.3em;flex-shrink:0}
.btn{padding:14px 35px;border:4px solid #a12d0a;border-radius:14px;font-size:1.15em;font-weight:bold;cursor:pointer;background:linear-gradient(180deg,#e53935 0%,#d4380d 50%,#b71c1c 100%);color:#fff;transition:all 0.15s cubic-bezier(0.34,1.56,0.64,1);box-shadow:inset 0 3px 0 rgba(255,255,255,0.25),inset 0 -3px 6px rgba(0,0,0,0.3),0 4px 8px rgba(0,0,0,0.35);text-shadow:0 2px 3px rgba(0,0,0,0.4);letter-spacing:0.5px}
.btn:hover{transform:scale(1.06) translateY(-2px);background:linear-gradient(180deg,#ef5350 0%,#e53935 50%,#c62828 100%);box-shadow:inset 0 3px 0 rgba(255,255,255,0.3),0 6px 12px rgba(0,0,0,0.4)}
.btn:active{transform:scale(0.97);box-shadow:inset 0 3px 6px rgba(0,0,0,0.4)}
.btn:disabled{opacity:0.45;cursor:not-allowed;filter:grayscale(0.4)}
#start-btn{margin-top:12px}
@keyframes start-pulse{0%,100%{box-shadow:inset 0 3px 0 rgba(255,255,255,0.25),inset 0 -3px 6px rgba(0,0,0,0.3),0 4px 8px rgba(0,0,0,0.35),0 0 15px rgba(229,57,53,0.4)}50%{box-shadow:inset 0 3px 0 rgba(255,255,255,0.25),inset 0 -3px 6px rgba(0,0,0,0.3),0 4px 8px rgba(0,0,0,0.35),0 0 30px rgba(229,57,53,0.6)}}
@keyframes start-shine{0%{left:-100%}50%,100%{left:100%}}
#game-screen{align-items:stretch;justify-content:flex-start}
#hud{display:flex;justify-content:space-around;padding:12px 10px;background:repeating-linear-gradient(90deg,#4a3828 0px,#5a4838 2px,#3d2814 4px,#4a3828 6px),linear-gradient(180deg,#5a4838 0%,#3d2814 50%,#2d1f0f 100%);background-blend-mode:overlay;border-bottom:4px solid #f5a623;border-top:3px solid #2a1a0a;align-items:center;box-shadow:inset 0 2px 4px rgba(255,200,100,0.15),inset 0 -4px 8px rgba(0,0,0,0.4),0 4px 8px rgba(0,0,0,0.3)}
.hud-item{text-align:center;background:linear-gradient(180deg,rgba(0,0,0,0.2),rgba(0,0,0,0.35));padding:6px 10px;border-radius:8px;border:2px solid #5d4037;box-shadow:inset 0 1px 0 rgba(255,255,255,0.1)}
#beaver-mascot{width:48px;height:48px;position:relative;flex-shrink:0;transition:transform 0.2s}
.beaver-head{width:100%;height:100%;position:relative}
.beaver-face{width:40px;height:36px;background:linear-gradient(180deg,#c9a86c 0%,#a67c52 70%,#8b6342 100%);border-radius:50% 50% 45% 45%;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);border:2px solid #5d4037;box-shadow:inset 0 -4px 8px rgba(0,0,0,0.2),0 2px 4px rgba(0,0,0,0.3)}
.beaver-ear{width:12px;height:12px;background:linear-gradient(180deg,#8b6342,#6d4c2a);border-radius:50%;position:absolute;top:2px;border:2px solid #5d4037}
.beaver-ear.left{left:2px}
.beaver-ear.right{right:2px}
.beaver-eye{width:10px;height:10px;background:#fff;border-radius:50%;position:absolute;top:10px;border:1px solid #333;overflow:hidden}
.beaver-eye.left{left:6px}
.beaver-eye.right{right:6px}
.beaver-pupil{width:5px;height:5px;background:#222;border-radius:50%;position:absolute;top:2px;left:2px;transition:all 0.15s}
.beaver-nose{width:10px;height:7px;background:linear-gradient(180deg,#4a3728,#2d1f14);border-radius:50%;position:absolute;top:18px;left:50%;transform:translateX(-50%)}
.beaver-mouth{width:14px;height:6px;background:#2d1f14;border-radius:0 0 8px 8px;position:absolute;top:25px;left:50%;transform:translateX(-50%);transition:all 0.2s}
.beaver-teeth{width:10px;height:6px;background:#fff;position:absolute;top:24px;left:50%;transform:translateX(-50%);display:flex;gap:1px;border-radius:0 0 2px 2px;box-shadow:0 1px 2px rgba(0,0,0,0.3)}
.beaver-teeth::before,.beaver-teeth::after{content:'';flex:1;background:#fff;border:1px solid #ddd}
.beaver-cheek{width:8px;height:6px;background:rgba(255,150,150,0.5);border-radius:50%;position:absolute;top:16px;opacity:0;transition:opacity 0.2s}
.beaver-cheek.left{left:1px}
.beaver-cheek.right{right:1px}
.beaver-idle .beaver-pupil{animation:beaver-look 3s infinite}
.beaver-happy{animation:beaver-bounce 0.3s ease-out}
.beaver-happy .beaver-mouth{width:16px;height:8px;border-radius:0 0 10px 10px}
.beaver-happy .beaver-cheek{opacity:1}
.beaver-happy .beaver-eye{height:6px}
.beaver-excited{animation:beaver-bounce 0.15s infinite}
.beaver-excited .beaver-mouth{width:18px;height:10px;border-radius:0 0 12px 12px;background:#1a1209}
.beaver-excited .beaver-cheek{opacity:1}
.beaver-excited .beaver-eye{height:5px}
.beaver-worried .beaver-eye{height:12px}
.beaver-worried .beaver-pupil{top:4px;animation:beaver-shake 0.2s infinite}
.beaver-worried .beaver-mouth{width:10px;height:8px;border-radius:50%;background:#2d1f14}
.beaver-sad{transform:translateY(2px)}
.beaver-sad .beaver-eye{height:6px}
.beaver-sad .beaver-pupil{top:3px}
.beaver-sad .beaver-mouth{width:12px;height:4px;border-radius:8px 8px 0 0;top:27px}
@keyframes beaver-look{0%,100%{transform:translateX(0)}25%{transform:translateX(2px)}75%{transform:translateX(-2px)}}
@keyframes beaver-bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-4px)}}
@keyframes beaver-shake{0%,100%{transform:translateX(0)}50%{transform:translateX(2px)}}
.beaver-speech{position:absolute;left:100%;top:50%;transform:translateY(-50%);margin-left:8px;background:linear-gradient(180deg,#fff 0%,#f5f5f5 100%);color:#333;padding:6px 10px;border-radius:10px;font-size:0.65em;white-space:nowrap;box-shadow:0 2px 8px rgba(0,0,0,0.3);border:2px solid #f5a623;opacity:0;pointer-events:none;z-index:100}
.beaver-speech::before{content:'';position:absolute;left:-8px;top:50%;transform:translateY(-50%);border:6px solid transparent;border-right-color:#f5a623}
.beaver-speech::after{content:'';position:absolute;left:-5px;top:50%;transform:translateY(-50%);border:5px solid transparent;border-right-color:#fff}
.beaver-speech.active{opacity:1;animation:speech-pop 0.3s cubic-bezier(0.34,1.56,0.64,1)}
@keyframes speech-pop{0%{opacity:0;transform:translateY(-50%) scale(0.8)}100%{opacity:1;transform:translateY(-50%) scale(1)}}
.hud-item .label{font-size:0.6em;opacity:0.9;text-transform:uppercase;color:#f5a623;letter-spacing:0.5px;text-shadow:0 1px 2px rgba(0,0,0,0.5)}
.hud-item .value{font-size:1.1em;font-weight:bold;text-shadow:0 2px 3px rgba(0,0,0,0.4)}
#dirty-count{color:#fdd835;font-size:0.9em}
#dirty-sinks{color:#64b5f6;font-size:0.9em}
.audio-ctrl{display:flex;flex-direction:column;align-items:center;gap:2px}
.audio-label{font-size:0.5em;opacity:0.8;text-transform:uppercase;letter-spacing:0.5px;color:#f5a623}
.mute-btn{background:none;border:none;font-size:1.3em;cursor:pointer;padding:4px 8px;border-radius:6px;transition:transform 0.15s cubic-bezier(0.34,1.56,0.64,1),opacity 0.15s;opacity:0.75;filter:drop-shadow(0 1px 2px rgba(0,0,0,0.4))}
.mute-btn:hover{opacity:1;transform:scale(1.15)}
.mute-btn:active{transform:scale(0.95)}
.mute-btn.muted{opacity:0.5;text-decoration:line-through;text-decoration-thickness:2px}
#play-area{flex:1;position:relative;overflow:hidden;min-height:300px}
#play-area.shake{animation:screen-shake 0.3s}
#bathroom{position:absolute;inset:0;background:linear-gradient(180deg,#f5f0e6 0%,#ebe4d6 30%,#e0d8c8 100%);display:flex;flex-direction:column}
#bathroom::before{content:'';position:absolute;top:0;left:0;right:0;height:50%;background:repeating-linear-gradient(0deg,transparent 0px,transparent 15px,rgba(200,190,170,0.3) 15px,rgba(200,190,170,0.3) 16px);pointer-events:none;z-index:0}
#stalls-row{display:flex;justify-content:center;gap:8px;padding:12px 10px;background:linear-gradient(180deg,#7d5a44 0%,#5d4037 50%,#4e342e 100%);border-bottom:5px solid #3e2723;box-shadow:inset 0 2px 8px rgba(0,0,0,0.3),0 4px 8px rgba(0,0,0,0.2)}
.stall{width:62px;display:flex;flex-direction:column;align-items:center;cursor:pointer;transition:transform 0.18s cubic-bezier(0.34,1.56,0.64,1);position:relative}
.stall:hover{transform:scale(1.08) translateY(-2px)}
.stall:active{transform:scale(0.95)}
.stall-light{width:16px;height:16px;border-radius:50%;margin-bottom:5px;border:3px solid #2a1a0a;box-shadow:inset 0 -3px 0 rgba(0,0,0,0.3),0 2px 4px rgba(0,0,0,0.4);transition:all 0.3s}
.stall-body{width:56px;height:78px;background:linear-gradient(180deg,#f5ebe0 0%,#e8dcc8 100%);border:4px solid #5d4037;border-bottom:none;border-radius:14px 14px 0 0;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;overflow:hidden;box-shadow:inset 0 0 15px rgba(93,64,55,0.15),0 4px 8px rgba(0,0,0,0.25)}
.stall-body::before{content:'';position:absolute;top:0;left:0;right:0;height:10px;background:linear-gradient(180deg,rgba(255,255,255,0.5),transparent);border-radius:10px 10px 0 0}
.stall-door{position:absolute;inset:0;background:repeating-linear-gradient(90deg,#c9a86c 0px,#d4b87a 2px,#bf9b5c 4px,#c9a86c 6px),linear-gradient(180deg,#d4b87a 0%,#a67c52 50%,#8b6342 100%);background-blend-mode:overlay;border:3px solid #5d4037;border-bottom:none;border-radius:10px 10px 0 0;transform-origin:left;transition:transform 0.4s cubic-bezier(0.4,0,0.2,1);z-index:5;box-shadow:inset 3px 0 8px rgba(0,0,0,0.2),inset -2px 0 5px rgba(255,255,255,0.15)}
.stall-door::before{content:'';position:absolute;top:10px;left:50%;transform:translateX(-50%);width:22px;height:6px;background:linear-gradient(180deg,#4e342e,#3e2723);border-radius:3px;box-shadow:0 2px 3px rgba(0,0,0,0.3)}
.stall-door::after{content:'';position:absolute;right:6px;top:50%;transform:translateY(-50%);width:8px;height:26px;background:linear-gradient(90deg,#5d4037,#8d6e63,#5d4037);border-radius:4px;border:2px solid #3e2723;box-shadow:inset 0 -3px 4px rgba(0,0,0,0.3),2px 2px 4px rgba(0,0,0,0.4)}
.stall-door.open{transform:rotateY(-100deg)}
.stall-icon{font-size:1.5em;z-index:1;filter:drop-shadow(0 2px 2px rgba(0,0,0,0.15))}
.stall-label{font-size:0.55em;font-weight:bold;z-index:1;margin-top:2px;text-shadow:0 1px 1px rgba(0,0,0,0.15);color:#5d4037}
.stall-bar{position:absolute;bottom:0;left:0;height:6px;background:linear-gradient(90deg,#1e88e5,#64b5f6);z-index:6;transition:width 0.08s;border-radius:0 4px 4px 0;box-shadow:0 0 10px rgba(30,136,229,0.5)}
.stall-num{font-size:0.65em;color:#5d4037;margin-top:3px;font-weight:bold;text-shadow:0 1px 0 rgba(255,255,255,0.5)}
.stall.empty .stall-light{background:radial-gradient(circle at 30% 30%,#81c784,#43a047);box-shadow:0 0 12px #43a047,inset 0 2px 4px rgba(255,255,255,0.4)}
.stall.empty .stall-body{background:linear-gradient(180deg,#e8f5e9 0%,#c8e6c9 100%)}
.stall.occupied .stall-light{background:radial-gradient(circle at 30% 30%,#ef5350,#c62828);box-shadow:0 0 12px #e53935,inset 0 2px 4px rgba(255,255,255,0.3)}
.stall.occupied .stall-body{background:linear-gradient(180deg,#ffebee 0%,#ffcdd2 100%)}
.stall.dirty .stall-light{background:radial-gradient(circle at 30% 30%,#ffee58,#f9a825);box-shadow:0 0 16px #fdd835,inset 0 2px 4px rgba(255,255,255,0.4);animation:blink 0.4s infinite alternate}
.stall.dirty .stall-body{background:linear-gradient(180deg,#e0d4b8 0%,#d4c4a0 40%,#c9b48c 100%);animation:shake 0.15s infinite;box-shadow:inset 0 0 25px rgba(120,80,30,0.35),0 4px 8px rgba(0,0,0,0.25)}
.stall.dirty .stall-body::after{content:'';position:absolute;inset:0;background:radial-gradient(circle at 20% 30%,rgba(139,90,43,0.25) 0%,transparent 30%),radial-gradient(circle at 70% 60%,rgba(139,90,43,0.2) 0%,transparent 25%),radial-gradient(circle at 45% 80%,rgba(120,80,30,0.3) 0%,transparent 20%);pointer-events:none;border-radius:10px 10px 0 0}
/* Stink lines emanating from dirty stalls */
.stall.dirty .stink-lines{display:flex}
.stink-lines{display:none;position:absolute;top:-12px;left:50%;transform:translateX(-50%);width:44px;height:28px;pointer-events:none;z-index:10;justify-content:space-between;padding:0 4px}
.stink-line{width:4px;height:20px;background:linear-gradient(180deg,transparent 0%,rgba(139,119,42,0.7) 30%,rgba(120,100,40,0.5) 70%,transparent 100%);border-radius:50% 50% 50% 50%/60% 60% 40% 40%;animation:stink-wave 1.2s ease-in-out infinite}
.stink-line:nth-child(1){animation-delay:0s;transform-origin:bottom center}
.stink-line:nth-child(2){animation-delay:0.4s;height:24px;transform-origin:bottom center}
.stink-line:nth-child(3){animation-delay:0.8s;transform-origin:bottom center}
@keyframes stink-wave{0%{transform:translateY(0) scaleY(0.5) rotate(-8deg);opacity:0}25%{opacity:0.85}50%{transform:translateY(-12px) scaleY(1) rotate(8deg);opacity:0.7}75%{transform:translateY(-20px) scaleY(0.8) rotate(-5deg);opacity:0.4}100%{transform:translateY(-26px) scaleY(0.3) rotate(3deg);opacity:0}}
/* Fly buzzing around dirty stalls */
.stall.dirty .stall-fly{display:block}
.stall-fly{display:none;position:absolute;top:-5px;right:-8px;font-size:0.6em;z-index:12;animation:fly-buzz 1.5s ease-in-out infinite;filter:drop-shadow(0 1px 2px rgba(0,0,0,0.4))}
@keyframes fly-buzz{0%{transform:translate(0,0) rotate(0deg)}25%{transform:translate(-8px,-4px) rotate(-15deg)}50%{transform:translate(-2px,3px) rotate(10deg)}75%{transform:translate(6px,-2px) rotate(-5deg)}100%{transform:translate(0,0) rotate(0deg)}}
.stall.cleaning .stall-light{background:radial-gradient(circle at 30% 30%,#64b5f6,#1565c0);box-shadow:0 0 14px #1e88e5,inset 0 2px 4px rgba(255,255,255,0.4)}
.stall.cleaning .stall-body{background:linear-gradient(180deg,#e3f2fd 0%,#bbdefb 100%)}
#floor-area{flex:1;position:relative;background:repeating-conic-gradient(from 0deg at 50% 50%,#c4b89a 0deg 90deg,#d8cdb5 90deg 180deg,#c4b89a 180deg 270deg,#d8cdb5 270deg 360deg);background-size:40px 40px;box-shadow:inset 0 40px 60px -20px rgba(0,0,0,0.15)}
#floor-area::before{content:'';position:absolute;inset:0;background:repeating-linear-gradient(90deg,transparent 0px,transparent 39px,rgba(0,0,0,0.08) 39px,rgba(0,0,0,0.08) 41px),repeating-linear-gradient(0deg,transparent 0px,transparent 39px,rgba(0,0,0,0.08) 39px,rgba(0,0,0,0.08) 41px);pointer-events:none}
#floor-area::after{content:'';position:absolute;bottom:0;left:0;right:0;height:8px;background:linear-gradient(180deg,#5d4037 0%,#3e2723 100%);box-shadow:inset 0 2px 0 rgba(255,255,255,0.1),0 -2px 4px rgba(0,0,0,0.2)}
.puddle{position:absolute;width:40px;height:28px;border-radius:50%;cursor:pointer;z-index:8;transition:transform 0.15s;display:flex;align-items:center;justify-content:center;font-size:1.2em}
.puddle:hover{transform:scale(1.15)}
.puddle:active{transform:scale(0.9)}
.puddle.vomit{background:radial-gradient(ellipse,#9acd32 20%,#6b8e23 60%,#556b2f 100%);box-shadow:0 2px 6px rgba(0,0,0,0.3),inset 0 -3px 6px rgba(0,0,0,0.2)}
.puddle.pee{background:radial-gradient(ellipse,#ffd54f 20%,#ffb300 60%,#ff8f00 100%);box-shadow:0 2px 6px rgba(0,0,0,0.3),inset 0 -3px 6px rgba(0,0,0,0.2)}
.puddle .puddle-stink{position:absolute;top:-12px;left:50%;transform:translateX(-50%);display:flex;gap:2px}
.puddle .stink-line{width:3px;height:14px;background:linear-gradient(180deg,transparent 0%,rgba(100,80,20,0.6) 40%,transparent 100%);border-radius:50%;animation:stink-wave 0.8s ease-in-out infinite}
.puddle .stink-line:nth-child(2){animation-delay:0.2s;height:18px}
.puddle .stink-line:nth-child(3){animation-delay:0.4s}
.puddle.cleaning{animation:puddle-clean 0.3s ease-out forwards}
@keyframes puddle-clean{to{transform:scale(0);opacity:0}}
#wall-sign{position:absolute;top:10px;left:50%;transform:translateX(-50%);background:linear-gradient(180deg,#4a8c4a 0%,#3d7a3d 50%,#2e6b2e 100%);color:#fff;padding:6px 16px;border-radius:6px;font-size:0.7em;font-weight:bold;letter-spacing:1px;border:3px solid #2a5a2a;box-shadow:0 3px 8px rgba(0,0,0,0.4),inset 0 1px 0 rgba(255,255,255,0.2);z-index:5;text-shadow:0 1px 2px rgba(0,0,0,0.4)}
#sinks-area{position:absolute;bottom:0;left:50%;transform:translateX(-50%);display:flex;gap:12px;padding:8px 15px;background:linear-gradient(#5a4a38,#4a3a28);border-radius:10px 10px 0 0;border:2px solid #6a5a48;border-bottom:none}
.sink{width:48px;height:42px;background:linear-gradient(#e8e8e8,#c0c0c0);border:3px solid #888;border-radius:8px;cursor:pointer;display:flex;flex-direction:column;align-items:center;justify-content:center;transition:transform 0.15s cubic-bezier(0.34,1.56,0.64,1)}
.sink:hover{transform:scale(1.1)}
.sink:active{transform:scale(0.95)}
.sink-bowl{width:30px;height:12px;background:#fff;border:2px solid #999;border-radius:0 0 10px 10px}
.sink.dirty .sink-bowl{background:#ffcc80;animation:pulse-dirty 0.5s infinite alternate}
.sink.cleaning .sink-bowl{background:#81d4fa}
.sink-label{font-size:0.45em;color:#333;font-weight:bold;margin-top:2px}
#exit-door{position:absolute;bottom:0;right:10px;width:55px;height:75px;background:linear-gradient(#5a4a3a,#3a2a1a);border:3px solid #2a1a0a;border-bottom:none;border-radius:8px 8px 0 0;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.4em}
#exit-door::after{content:'EXIT';font-size:0.35em;color:#aaa;margin-top:2px}
#towels{position:absolute;bottom:0;left:10px;width:50px;height:60px;background:linear-gradient(#a67c52,#8b6342);border:3px solid #6d4c2a;border-bottom:none;border-radius:6px 6px 0 0;cursor:pointer;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:0.7em;transition:transform 0.15s cubic-bezier(0.34,1.56,0.64,1)}
#towels:hover{transform:scale(1.08)}
#towels:active{transform:scale(0.95)}
#towels.low{animation:pulse-danger 0.5s infinite alternate}
.person{position:absolute;font-size:1.8em;z-index:10;transition:opacity 0.15s,transform 0.2s}
.person-body{position:relative;width:36px;height:48px;display:flex;flex-direction:column;align-items:center}
.person-icon{position:relative;z-index:2;filter:drop-shadow(0 2px 3px rgba(0,0,0,0.4));transition:transform 0.15s}
.person-torso{position:absolute;bottom:0;width:24px;height:20px;background:linear-gradient(180deg,#5a8dd8 0%,#3d6cb8 100%);border-radius:8px 8px 4px 4px;z-index:1;border:2px solid #2d5090;box-shadow:inset 0 2px 0 rgba(255,255,255,0.2),0 2px 4px rgba(0,0,0,0.3)}
.person-legs{position:absolute;bottom:-6px;width:20px;height:10px;display:flex;gap:4px;z-index:0}
.person-leg{flex:1;background:linear-gradient(180deg,#4a4a4a,#333);border-radius:0 0 3px 3px;transition:transform 0.1s}
.person.walking{animation:none}
.person.walking .person-icon{animation:head-bob 0.25s infinite}
.person.walking .person-leg:first-child{animation:leg-walk-l 0.25s infinite}
.person.walking .person-leg:last-child{animation:leg-walk-r 0.25s infinite}
.person.entering{opacity:0;transform:scale(0.5)}
.person .patience-bar{position:absolute;bottom:-14px;left:50%;transform:translateX(-50%);width:32px;height:6px;background:#222;border-radius:4px;overflow:hidden;border:2px solid #111;box-shadow:inset 0 1px 2px rgba(0,0,0,0.5)}
.person .patience-fill{height:100%;transition:width 0.1s,background 0.3s;border-radius:2px}
.person .thought{position:absolute;top:-10px;left:50%;transform:translateX(-50%);background:linear-gradient(180deg,#fff,#f0f0f0);color:#333;padding:4px 8px;border-radius:12px;font-size:0.5em;white-space:nowrap;opacity:0;transition:opacity 0.2s,transform 0.2s;box-shadow:0 3px 8px rgba(0,0,0,0.35);border:2px solid #ddd;z-index:10}
.person .thought::after{content:'';position:absolute;bottom:-8px;left:50%;transform:translateX(-50%);border:6px solid transparent;border-top-color:#f0f0f0}
.person.impatient .thought{opacity:1;animation:thought-bounce 0.3s ease-out}
.person.urgent .person-body{animation:urgent-shake 0.15s infinite}
.person.urgent .person-icon{filter:drop-shadow(0 0 8px rgba(229,57,53,0.7)) drop-shadow(0 2px 3px rgba(0,0,0,0.4))}
.person.urgent .person-torso{background:linear-gradient(180deg,#e57373,#c62828);border-color:#b71c1c}
.person.vip .person-icon{filter:drop-shadow(0 0 10px rgba(255,215,0,0.8)) drop-shadow(0 2px 3px rgba(0,0,0,0.4))}
.person.vip .person-torso{background:linear-gradient(180deg,#ffd700,#daa520);border-color:#b8860b}
.person.vip .vip-badge{position:absolute;top:-8px;right:-4px;font-size:0.5em;z-index:15}
.person.vip .patience-bar{border-color:#ffd700;box-shadow:0 0 6px rgba(255,215,0,0.5)}
.person.messy .person-icon{filter:drop-shadow(0 0 6px rgba(139,90,43,0.7)) drop-shadow(0 2px 3px rgba(0,0,0,0.4))}
.person.messy .messy-badge{position:absolute;top:-6px;left:-4px;font-size:0.45em;z-index:15;animation:messy-drip 0.8s infinite alternate}
.person.messy .person-torso{background:linear-gradient(180deg,#a67c52,#8b5a2b);border-color:#6d4c2a}
.person.clean .person-icon{filter:drop-shadow(0 0 8px rgba(100,200,255,0.6)) drop-shadow(0 2px 3px rgba(0,0,0,0.4))}
.person.clean .clean-badge{position:absolute;top:-6px;left:-4px;font-size:0.45em;z-index:15;animation:sparkle 0.6s infinite alternate}
.person.clean .person-torso{background:linear-gradient(180deg,#81d4fa,#4fc3f7);border-color:#0288d1}
.person.special .person-icon{filter:drop-shadow(0 0 8px rgba(255,165,0,0.5)) drop-shadow(0 2px 3px rgba(0,0,0,0.4))}
.person.special .special-badge{position:absolute;top:-8px;left:-4px;font-size:0.5em;z-index:15}
.person.special .special-name{position:absolute;bottom:-28px;left:50%;transform:translateX(-50%);background:linear-gradient(180deg,#5d4037,#3e2723);padding:2px 6px;border-radius:8px;font-size:0.35em;white-space:nowrap;color:#ffd54f;font-weight:bold;text-shadow:0 1px 2px rgba(0,0,0,0.6);border:1px solid #f5a623;box-shadow:0 2px 4px rgba(0,0,0,0.4);letter-spacing:0.5px}
@keyframes messy-drip{0%{transform:translateY(0)}100%{transform:translateY(2px)}}
@keyframes sparkle{0%{transform:scale(1)}100%{transform:scale(1.2);filter:brightness(1.3)}}
.person.happy .person-icon{animation:happy-bounce 0.4s ease-out;filter:drop-shadow(0 0 6px rgba(255,235,59,0.6)) drop-shadow(0 2px 3px rgba(0,0,0,0.4))}
.person.disgusted .person-icon{filter:hue-rotate(80deg) saturate(1.3) drop-shadow(0 2px 3px rgba(0,0,0,0.4))}
.person.disgusted .person-body{animation:disgust-recoil 0.3s ease-out}
@keyframes head-bob{0%,100%{transform:translateY(0)}50%{transform:translateY(-3px)}}
@keyframes leg-walk-l{0%,100%{transform:translateY(0) rotate(-8deg)}50%{transform:translateY(3px) rotate(8deg)}}
@keyframes leg-walk-r{0%,100%{transform:translateY(3px) rotate(8deg)}50%{transform:translateY(0) rotate(-8deg)}}
@keyframes urgent-shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-2px)}75%{transform:translateX(2px)}}
@keyframes thought-bounce{0%{transform:translateX(-50%) scale(0.8)}50%{transform:translateX(-50%) scale(1.1)}100%{transform:translateX(-50%) scale(1)}}
@keyframes happy-bounce{0%{transform:scale(1)}30%{transform:scale(1.15)}60%{transform:scale(0.95)}100%{transform:scale(1)}}
@keyframes disgust-recoil{0%{transform:translateX(0)}30%{transform:translateX(-5px)}100%{transform:translateX(0)}}
#task-panel{position:absolute;bottom:80px;left:50%;transform:translateX(-50%);background:repeating-linear-gradient(90deg,#3d2814 0px,#4a3424 2px,#2d1f0f 4px,#3d2814 6px),linear-gradient(180deg,#4a3424 0%,#3d2814 50%,#2d1f0f 100%);background-blend-mode:overlay;padding:14px 20px;border-radius:16px;border:4px solid #f5a623;display:none;z-index:50;box-shadow:0 6px 24px rgba(0,0,0,0.6),inset 0 2px 4px rgba(255,200,100,0.1),inset 0 -4px 8px rgba(0,0,0,0.3)}
#task-panel.show{display:block;animation:pop-in 0.15s ease-out}
#task-panel h3{font-size:0.95em;color:#f5a623;margin-bottom:8px;text-shadow:0 2px 4px rgba(0,0,0,0.5);letter-spacing:0.5px}
#task-panel .hint{font-size:0.65em;color:#c9a86c;margin-bottom:10px;text-shadow:0 1px 2px rgba(0,0,0,0.4)}
#task-buttons{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
.task-btn{padding:12px 18px;background:linear-gradient(180deg,#5a4a38 0%,#4a3a28 50%,#3a2a18 100%);border:3px solid #6a5a48;border-radius:12px;color:#fff;font-size:0.9em;cursor:pointer;transition:all 0.15s cubic-bezier(0.34,1.56,0.64,1);position:relative;overflow:hidden;box-shadow:inset 0 2px 0 rgba(255,255,255,0.15),inset 0 -2px 4px rgba(0,0,0,0.3),0 3px 6px rgba(0,0,0,0.3);text-shadow:0 1px 2px rgba(0,0,0,0.4)}
.task-btn:hover{background:linear-gradient(180deg,#6a5a48 0%,#5a4a38 50%,#4a3a28 100%);transform:scale(1.08) translateY(-2px);box-shadow:inset 0 2px 0 rgba(255,255,255,0.2),0 5px 10px rgba(0,0,0,0.4)}
.task-btn:active{transform:scale(0.95);box-shadow:inset 0 2px 4px rgba(0,0,0,0.4)}
.task-btn.done{background:linear-gradient(180deg,#4caf50 0%,#43a047 50%,#388e3c 100%);border-color:#2e7d32;opacity:0.8}
.task-btn.active{border-color:#f5a623;box-shadow:0 0 20px rgba(245,166,35,0.6),inset 0 2px 0 rgba(255,255,255,0.2);animation:glow 0.5s infinite alternate}
.task-btn .progress{position:absolute;bottom:0;left:0;height:5px;background:linear-gradient(90deg,#f5a623,#fdd835);transition:width 0.05s;border-radius:0 4px 4px 0}
#powerups{display:flex;gap:10px;padding:12px;background:repeating-linear-gradient(90deg,#3d2814 0px,#4a3424 2px,#2d1f0f 4px,#3d2814 6px),linear-gradient(180deg,#3d2814 0%,#2d1f0f 100%);background-blend-mode:overlay;border-top:4px solid #f5a623;justify-content:center;box-shadow:inset 0 4px 8px rgba(0,0,0,0.3)}
.powerup{padding:10px 14px;background:linear-gradient(180deg,#5a4a38 0%,#4a3a28 50%,#3a2a18 100%);border:3px solid #6a5a48;border-radius:12px;color:#fff;font-size:0.75em;cursor:pointer;display:flex;align-items:center;gap:6px;transition:all 0.18s cubic-bezier(0.34,1.56,0.64,1);box-shadow:inset 0 2px 0 rgba(255,255,255,0.15),inset 0 -2px 4px rgba(0,0,0,0.3),0 3px 6px rgba(0,0,0,0.3);text-shadow:0 1px 2px rgba(0,0,0,0.4)}
.powerup:hover{background:linear-gradient(180deg,#6a5a48 0%,#5a4a38 50%,#4a3a28 100%);transform:scale(1.08) translateY(-2px);box-shadow:inset 0 2px 0 rgba(255,255,255,0.2),0 5px 10px rgba(0,0,0,0.4)}
.powerup:active{transform:scale(0.95);box-shadow:inset 0 2px 4px rgba(0,0,0,0.4)}
.powerup.disabled{opacity:0.35;pointer-events:none;filter:grayscale(0.3)}
.powerup.active-effect{border-color:#f5a623;box-shadow:0 0 16px rgba(245,166,35,0.7),inset 0 2px 0 rgba(255,255,255,0.2);animation:glow 0.4s infinite alternate}
.powerup .count{background:linear-gradient(180deg,#e53935,#c62828);border-radius:50%;width:22px;height:22px;display:flex;align-items:center;justify-content:center;font-weight:bold;border:2px solid #b71c1c;box-shadow:inset 0 -2px 4px rgba(0,0,0,0.3),0 2px 4px rgba(0,0,0,0.3)}
.float-msg{position:absolute;font-weight:bold;font-size:1.2em;animation:float-up 1s forwards;z-index:100;text-shadow:0 2px 4px #000;pointer-events:none}
.float-msg.good{color:#43a047}
.float-msg.bad{color:#e53935}
.float-msg.combo{color:#f5a623;font-size:1.5em}
.float-msg.save{color:#2196f3;font-size:1.3em}
#result-screen,#gameover-screen{background:linear-gradient(180deg,#3d2814 0%,#2d1f0f 100%);gap:18px}
#result-screen h2,#gameover-screen h2{font-size:1.7em;color:#f5a623;text-shadow:2px 2px 0 #2a1a0a,0 0 15px rgba(245,166,35,0.3);letter-spacing:1px}
.stats-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;max-width:300px}
.stat{background:linear-gradient(180deg,#5a4a38 0%,#4a3a28 50%,#3a2a18 100%);padding:14px;border-radius:12px;text-align:center;border:3px solid #6a5a48;box-shadow:inset 0 2px 0 rgba(255,255,255,0.1),inset 0 -3px 6px rgba(0,0,0,0.3),0 3px 6px rgba(0,0,0,0.3)}
.stat .num{font-size:1.5em;font-weight:bold;color:#f5a623;text-shadow:0 2px 4px rgba(0,0,0,0.4)}
.stat .lbl{font-size:0.65em;opacity:0.85;text-transform:uppercase;letter-spacing:0.5px;text-shadow:0 1px 2px rgba(0,0,0,0.3)}
.grade{font-size:1.5em;padding:12px 30px;border-radius:14px;font-weight:bold;text-shadow:0 2px 4px rgba(0,0,0,0.4);box-shadow:inset 0 2px 0 rgba(255,255,255,0.2),0 4px 10px rgba(0,0,0,0.35)}
.grade.S{background:linear-gradient(180deg,rgba(245,166,35,0.4),rgba(245,166,35,0.2));color:#fdd835;border:3px solid #f5a623;box-shadow:0 0 20px rgba(245,166,35,0.4)}
.grade.A{background:linear-gradient(180deg,rgba(67,160,71,0.4),rgba(67,160,71,0.2));color:#66bb6a;border:3px solid #43a047}
.grade.B{background:linear-gradient(180deg,rgba(30,136,229,0.4),rgba(30,136,229,0.2));color:#64b5f6;border:3px solid #1e88e5}
.grade.C{background:linear-gradient(180deg,rgba(251,140,0,0.4),rgba(251,140,0,0.2));color:#ffa726;border:3px solid #fb8c00}
.grade.F{background:linear-gradient(180deg,rgba(229,57,53,0.4),rgba(229,57,53,0.2));color:#ef5350;border:3px solid #e53935}
.pick-row{display:flex;gap:14px}
.pick-item{padding:14px 20px;background:linear-gradient(180deg,#5a4a38 0%,#4a3a28 50%,#3a2a18 100%);border:3px solid #6a5a48;border-radius:14px;cursor:pointer;text-align:center;transition:all 0.18s cubic-bezier(0.34,1.56,0.64,1);box-shadow:inset 0 2px 0 rgba(255,255,255,0.15),inset 0 -2px 4px rgba(0,0,0,0.3),0 3px 6px rgba(0,0,0,0.3)}
.pick-item:hover{border-color:#f5a623;transform:scale(1.08) translateY(-2px);box-shadow:0 0 15px rgba(245,166,35,0.4),0 5px 10px rgba(0,0,0,0.4)}
.pick-item .icon{font-size:1.6em;filter:drop-shadow(0 2px 3px rgba(0,0,0,0.3))}
.pick-item .name{font-size:0.8em;margin-top:5px;font-weight:bold;text-shadow:0 1px 2px rgba(0,0,0,0.4)}
.pick-item .desc{font-size:0.6em;opacity:0.8;margin-top:3px;text-shadow:0 1px 2px rgba(0,0,0,0.3)}
#upgrade-screen{background:linear-gradient(180deg,#3d2814 0%,#2d1f0f 100%);gap:14px;overflow-y:auto;padding:15px 10px}
.upgrade-header{text-align:center}
.upgrade-header h2{font-size:1.5em;color:#f5a623;text-shadow:2px 2px 0 #2a1a0a;margin-bottom:5px}
.coins-display{font-size:1.3em;color:#fdd835;text-shadow:0 2px 4px rgba(0,0,0,0.4)}
.coins-display .coin-icon{font-size:1.1em}
.upgrades-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;max-width:360px;width:100%}
.upgrade-card{background:linear-gradient(180deg,#5a4a38 0%,#4a3a28 50%,#3a2a18 100%);padding:14px 10px;border-radius:14px;border:3px solid #6a5a48;text-align:center;transition:all 0.18s cubic-bezier(0.34,1.56,0.64,1);box-shadow:inset 0 2px 0 rgba(255,255,255,0.15),inset 0 -3px 6px rgba(0,0,0,0.3),0 4px 8px rgba(0,0,0,0.35);position:relative}
.upgrade-card:hover:not(.maxed){border-color:#f5a623;transform:scale(1.03) translateY(-2px);box-shadow:0 0 15px rgba(245,166,35,0.3),0 6px 12px rgba(0,0,0,0.4)}
.upgrade-card.maxed{opacity:0.7;border-color:#43a047}
.upgrade-icon{font-size:2em;filter:drop-shadow(0 3px 4px rgba(0,0,0,0.4))}
.upgrade-name{font-size:0.9em;font-weight:bold;color:#f5a623;margin-top:6px;text-shadow:0 1px 2px rgba(0,0,0,0.4)}
.upgrade-desc{font-size:0.65em;color:#c9a86c;margin-top:3px;text-shadow:0 1px 2px rgba(0,0,0,0.3)}
.upgrade-level{font-size:0.75em;margin-top:8px;padding:4px 10px;background:linear-gradient(180deg,rgba(0,0,0,0.2),rgba(0,0,0,0.35));border-radius:6px;display:inline-block}
.upgrade-level .current{color:#81c784}
.upgrade-level .max{color:#888}
.upgrade-cost{margin-top:8px;padding:6px 12px;background:linear-gradient(180deg,#fdd835 0%,#f5a623 50%,#e69500 100%);color:#2d1f0f;border:2px solid #e69500;border-radius:8px;cursor:pointer;font-weight:bold;font-size:0.8em;transition:all 0.15s cubic-bezier(0.34,1.56,0.64,1);box-shadow:inset 0 2px 0 rgba(255,255,255,0.3),0 2px 4px rgba(0,0,0,0.3)}
.upgrade-cost:hover{transform:scale(1.05);box-shadow:0 0 10px rgba(245,166,35,0.5)}
.upgrade-cost:active{transform:scale(0.95)}
.upgrade-cost.cant-afford{background:linear-gradient(180deg,#666,#555);color:#999;border-color:#444;cursor:not-allowed}
.upgrade-cost.cant-afford:hover{transform:none;box-shadow:none}
.upgrade-maxed{margin-top:8px;padding:6px 12px;background:linear-gradient(180deg,#43a047,#388e3c);color:#fff;border:2px solid #2e7d32;border-radius:8px;font-size:0.75em;font-weight:bold}
.upgrade-bonus{position:absolute;top:-8px;right:-8px;background:#e53935;color:#fff;padding:3px 8px;border-radius:10px;font-size:0.6em;font-weight:bold;border:2px solid #b71c1c}
#skip-upgrades{margin-top:10px;padding:12px 30px;background:linear-gradient(180deg,#5a4a38 0%,#4a3a28 100%);border:3px solid #6a5a48;border-radius:12px;color:#c9a86c;font-size:1em;cursor:pointer;transition:all 0.18s cubic-bezier(0.34,1.56,0.64,1);text-shadow:0 1px 2px rgba(0,0,0,0.4)}
#skip-upgrades:hover{background:linear-gradient(180deg,#6a5a48 0%,#5a4a38 100%);border-color:#8a7a68}
/* Shift intro screen */
#shift-intro{background:linear-gradient(180deg,#3d2814 0%,#2d4a1e 60%,#1a3310 100%);gap:0}
.intro-card{background:linear-gradient(180deg,#5a4030 0%,#3d2814 50%,#2d1f0f 100%);border:5px solid #f5a623;border-radius:20px;padding:25px 30px;max-width:340px;width:100%;box-shadow:0 8px 30px rgba(0,0,0,0.5),inset 0 2px 4px rgba(255,200,100,0.15);text-align:center;animation:intro-appear 0.4s cubic-bezier(0.34,1.56,0.64,1)}
@keyframes intro-appear{from{opacity:0;transform:scale(0.8) translateY(20px)}to{opacity:1;transform:scale(1) translateY(0)}}
.intro-shift-num{font-size:0.9em;color:#c9a86c;text-transform:uppercase;letter-spacing:3px;margin-bottom:6px}
.intro-title{font-size:1.8em;color:#f5a623;text-shadow:3px 3px 0 #2a1a0a,0 0 20px rgba(245,166,35,0.4);margin-bottom:12px}
.intro-desc{font-size:1em;color:#eee;line-height:1.4;margin-bottom:20px;opacity:0.9}
.intro-stats{display:flex;justify-content:center;gap:20px;margin-bottom:24px}
.intro-stat{display:flex;align-items:center;gap:6px;background:linear-gradient(180deg,rgba(0,0,0,0.2),rgba(0,0,0,0.35));padding:8px 12px;border-radius:8px;font-size:0.9em;border:2px solid #5d4037}
.intro-stat-icon{font-size:1.1em}
#shift-start-btn{margin-top:5px}
.bucky-tip{display:flex;align-items:flex-start;gap:10px;background:linear-gradient(180deg,rgba(45,74,30,0.6),rgba(26,51,16,0.7));border:2px solid #4a7c32;border-radius:10px;padding:10px 14px;margin-bottom:16px;text-align:left}
.bucky-tip-icon{font-size:1.5em;flex-shrink:0}
.bucky-tip-content{flex:1}
.bucky-tip-label{font-size:0.7em;color:#8bc34a;text-transform:uppercase;letter-spacing:1px;margin-bottom:3px;font-weight:bold}
.bucky-tip-text{font-size:0.85em;color:#e8f5e9;line-height:1.4}
@keyframes blink{from{box-shadow:0 0 8px #fdd835}to{box-shadow:0 0 20px #fdd835}}
@keyframes shake{0%,100%{transform:translateX(0)}50%{transform:translateX(-3px)}}
@keyframes walk{0%,100%{transform:translateY(0) rotate(-4deg)}50%{transform:translateY(-5px) rotate(4deg)}}
/* Bouncy animations with overshoot easing */
@keyframes float-up{0%{opacity:1;transform:translateY(0) scale(1)}20%{opacity:1;transform:translateY(-15px) scale(1.25)}45%{opacity:1;transform:translateY(-30px) scale(1.15)}100%{opacity:0;transform:translateY(-60px) scale(0.7)}}
@keyframes pop-in{0%{opacity:0;transform:translateX(-50%) scale(0.5)}60%{opacity:1;transform:translateX(-50%) scale(1.08)}80%{transform:translateX(-50%) scale(0.96)}100%{opacity:1;transform:translateX(-50%) scale(1)}}
@keyframes value-bump{0%{transform:scale(1)}40%{transform:scale(1.25)}70%{transform:scale(0.92)}100%{transform:scale(1)}}
.value-bump{animation:value-bump 0.25s cubic-bezier(0.34,1.56,0.64,1)}
/* Escalating combo visual effects */
@keyframes combo-pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.1)}}
@keyframes combo-pulse-fast{0%,100%{transform:scale(1)}50%{transform:scale(1.15)}}
@keyframes combo-pulse-intense{0%,100%{transform:scale(1)}50%{transform:scale(1.2)}}
@keyframes combo-glow{0%,100%{text-shadow:0 0 8px rgba(245,166,35,0.6),0 2px 3px rgba(0,0,0,0.4)}50%{text-shadow:0 0 16px rgba(245,166,35,0.9),0 0 25px rgba(245,166,35,0.5),0 2px 3px rgba(0,0,0,0.4)}}
@keyframes combo-glow-intense{0%,100%{text-shadow:0 0 12px rgba(255,87,34,0.7),0 2px 3px rgba(0,0,0,0.4)}50%{text-shadow:0 0 24px rgba(255,87,34,1),0 0 40px rgba(255,87,34,0.6),0 2px 3px rgba(0,0,0,0.4)}}
@keyframes combo-glow-legendary{0%,100%{text-shadow:0 0 15px rgba(255,215,0,0.8),0 2px 3px rgba(0,0,0,0.4)}50%{text-shadow:0 0 30px rgba(255,215,0,1),0 0 50px rgba(255,215,0,0.7),0 0 70px rgba(255,165,0,0.4),0 2px 3px rgba(0,0,0,0.4)}}
@keyframes screen-edge-glow{0%,100%{box-shadow:inset 0 0 60px rgba(255,87,34,0.15)}50%{box-shadow:inset 0 0 80px rgba(255,87,34,0.25)}}
@keyframes screen-edge-legendary{0%,100%{box-shadow:inset 0 0 80px rgba(255,215,0,0.2)}50%{box-shadow:inset 0 0 120px rgba(255,215,0,0.35)}}
#combo.combo-fire{animation:combo-pulse 0.5s ease-in-out infinite,combo-glow 0.5s ease-in-out infinite}
#combo.combo-intense{animation:combo-pulse-fast 0.35s ease-in-out infinite,combo-glow-intense 0.35s ease-in-out infinite}
#combo.combo-legendary{animation:combo-pulse-intense 0.25s ease-in-out infinite,combo-glow-legendary 0.25s ease-in-out infinite}
#play-area.combo-edge-glow{animation:screen-edge-glow 0.6s ease-in-out infinite}
#play-area.combo-edge-legendary{animation:screen-edge-legendary 0.4s ease-in-out infinite}
@keyframes pulse{from{box-shadow:0 0 8px #1e88e5}to{box-shadow:0 0 16px #1e88e5}}
@keyframes glow{from{box-shadow:0 0 8px #f5a623}to{box-shadow:0 0 18px #f5a623}}
@keyframes pulse-dirty{from{background:#ffcc80}to{background:#ffb74d}}
@keyframes pulse-danger{from{background:#c62828}to{background:#e53935}}
@keyframes screen-shake{0%,100%{transform:translateX(0)}20%{transform:translateX(-8px)}40%{transform:translateX(8px)}60%{transform:translateX(-5px)}80%{transform:translateX(5px)}}
@keyframes confetti{0%{transform:translateY(0) rotate(0deg) scale(1);opacity:1}100%{transform:translateY(-80px) rotate(360deg) scale(0);opacity:0}}
.confetti{position:absolute;font-size:1.4em;animation:confetti 0.7s forwards;pointer-events:none;z-index:200}
/* Cleaning celebration effects */
@keyframes stall-celebrate{0%{transform:scale(1)}15%{transform:scale(1.08)}35%{transform:scale(0.96)}55%{transform:scale(1.04)}75%{transform:scale(0.98)}100%{transform:scale(1)}}
@keyframes stall-success-flash{0%{box-shadow:inset 0 0 0 0 rgba(129,199,132,0)}20%{box-shadow:inset 0 0 30px 10px rgba(129,199,132,0.8)}100%{box-shadow:inset 0 0 0 0 rgba(129,199,132,0)}}
@keyframes door-swing{0%{transform:rotateY(-100deg)}30%{transform:rotateY(-20deg)}50%{transform:rotateY(-60deg)}70%{transform:rotateY(-30deg)}100%{transform:rotateY(0deg)}}
@keyframes sparkle-burst{0%{transform:translate(0,0) scale(1);opacity:1}100%{transform:translate(var(--tx),var(--ty)) scale(0);opacity:0}}
.stall.celebrate{animation:stall-celebrate 0.5s ease-out}
.stall.celebrate .stall-body{animation:stall-success-flash 0.6s ease-out}
.stall.celebrate .stall-door{animation:door-swing 0.6s cubic-bezier(0.34,1.56,0.64,1) forwards}
.sparkle{position:absolute;font-size:1em;animation:sparkle-burst 0.5s ease-out forwards;pointer-events:none;z-index:201}
#combo-milestone{position:absolute;top:30%;left:50%;transform:translate(-50%,-50%) scale(0);background:linear-gradient(180deg,rgba(245,166,35,0.95),rgba(230,130,0,0.95));color:#fff;padding:12px 25px;border-radius:12px;font-size:1.5em;font-weight:bold;z-index:150;border:3px solid #f5a623;box-shadow:0 0 30px rgba(245,166,35,0.6);text-shadow:0 2px 4px rgba(0,0,0,0.4);pointer-events:none}
#combo-milestone.show{animation:milestone-pop 1.5s forwards}
#combo-milestone.legendary{background:linear-gradient(180deg,rgba(255,215,0,0.95),rgba(255,165,0,0.95));border-color:#ffd700;box-shadow:0 0 40px rgba(255,215,0,0.8)}
@keyframes milestone-pop{0%{transform:translate(-50%,-50%) scale(0);opacity:0}15%{transform:translate(-50%,-50%) scale(1.2);opacity:1}25%{transform:translate(-50%,-50%) scale(1)}80%{transform:translate(-50%,-50%) scale(1);opacity:1}100%{transform:translate(-50%,-50%) scale(0.8);opacity:0}}
@keyframes combo-flash{0%{background:rgba(245,166,35,0)}50%{background:rgba(245,166,35,0.15)}100%{background:rgba(245,166,35,0)}}
.combo-flash{animation:combo-flash 0.4s}
#combo-break{position:absolute;top:40%;left:50%;transform:translate(-50%,-50%) scale(0);color:#ff9800;font-size:1.1em;font-weight:bold;z-index:140;text-shadow:0 2px 4px rgba(0,0,0,0.5);pointer-events:none;opacity:0}
#combo-break.show{animation:combo-break-pop 0.8s forwards}
@keyframes combo-break-pop{0%{transform:translate(-50%,-50%) scale(0);opacity:0}20%{transform:translate(-50%,-50%) scale(1.1);opacity:1}40%{transform:translate(-50%,-50%) scale(0.95)}60%{transform:translate(-50%,-50%) scale(1);opacity:0.8}100%{transform:translate(-50%,-50%) translateY(-20px);opacity:0}}
@keyframes rush-warning{0%,100%{opacity:1}50%{opacity:0.5}}
#rush-warning{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(213,0,0,0.9);color:#fff;padding:15px 30px;border-radius:10px;font-size:1.3em;font-weight:bold;display:none;z-index:100;animation:rush-warning 0.3s infinite}
#inspector-warning{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:linear-gradient(180deg,rgba(33,150,243,0.95),rgba(25,118,210,0.95));color:#fff;padding:15px 30px;border-radius:10px;font-size:1.3em;font-weight:bold;display:none;z-index:100;animation:rush-warning 0.3s infinite;border:3px solid #1565c0;box-shadow:0 0 20px rgba(33,150,243,0.5)}
.inspector{position:absolute;z-index:25;font-size:1.6em;transition:opacity 0.3s}
.inspector-body{display:flex;flex-direction:column;align-items:center}
.inspector-icon{filter:drop-shadow(0 0 8px rgba(33,150,243,0.8)) drop-shadow(0 2px 3px rgba(0,0,0,0.4))}
.inspector-badge{position:absolute;top:-8px;right:-8px;background:#1565c0;color:#fff;font-size:0.4em;padding:2px 5px;border-radius:4px;border:2px solid #0d47a1;font-weight:bold}
.inspector-clipboard{position:absolute;bottom:-5px;left:50%;transform:translateX(-50%);font-size:0.5em}
/* Click feedback animations */
@keyframes click-pulse{0%{transform:scale(1)}30%{transform:scale(0.92)}100%{transform:scale(1)}}
@keyframes click-flash{0%{box-shadow:inset 0 0 0 rgba(255,255,255,0)}30%{box-shadow:inset 0 0 20px rgba(255,255,255,0.5)}100%{box-shadow:inset 0 0 0 rgba(255,255,255,0)}}
@keyframes stall-click{0%{transform:scale(1)}25%{transform:scale(0.95)}50%{transform:scale(1.03)}100%{transform:scale(1)}}
@keyframes sink-ripple{0%{box-shadow:0 0 0 0 rgba(129,212,250,0.6)}100%{box-shadow:0 0 0 15px rgba(129,212,250,0)}}
.task-btn.clicked{animation:click-pulse 0.15s ease-out,click-flash 0.15s ease-out}
.stall.clicked{animation:stall-click 0.2s ease-out}
.sink.clicked{animation:sink-ripple 0.3s ease-out}
#towels.clicked{animation:click-pulse 0.2s ease-out}
.powerup.clicked{animation:click-pulse 0.15s ease-out}
/* Mobile/tablet breakpoint */
@media(max-width:600px){
#game-container{max-height:100vh}
#hud{padding:10px 6px;gap:4px}
.hud-item{padding:4px 6px}
.hud-item .label{font-size:0.5em}
.hud-item .value{font-size:0.95em}
#beaver-mascot{width:40px;height:40px}
.beaver-speech{font-size:0.55em;padding:5px 8px}
.audio-label{font-size:0.45em}
.mute-btn{font-size:1.1em;padding:3px 6px}
#stalls-row{gap:4px;padding:8px 4px}
.stall{width:54px;min-height:88px}
.stall-body{width:48px;height:68px}
.stall-light{width:14px;height:14px}
.stall-num{font-size:0.6em}
#sinks-area{gap:8px;padding:6px 10px}
.sink{width:52px;height:46px;min-width:44px;min-height:44px}
#towels{width:52px;height:64px;min-width:44px}
#exit-door{width:48px;height:65px}
#task-panel{padding:12px 14px;bottom:70px;max-width:90%}
.task-btn{padding:14px 20px;font-size:1em;min-height:48px;min-width:60px}
#task-buttons{gap:10px}
#powerups{padding:10px 6px;gap:8px}
.powerup{padding:12px 14px;font-size:0.8em;min-height:48px}
.powerup .count{width:24px;height:24px}
.person{font-size:1.5em}
.person-body{width:32px;height:42px}
.person .patience-bar{width:28px;height:5px;bottom:-12px}
.person.special .special-name{bottom:-24px;font-size:0.3em;padding:1px 5px}
#wall-sign{font-size:0.6em;padding:4px 10px}
}
/* Phone breakpoint - extra touch-friendly */
@media(max-width:420px){
.title-card{padding:15px 16px 20px;border-width:4px;border-radius:16px;max-width:95%}
.title-beaver{width:44px;height:44px}
.title-beaver .beaver-face{width:38px;height:34px}
.title-beaver .beaver-eye{width:10px;height:10px;top:10px}
.title-beaver .beaver-eye.left{left:6px}
.title-beaver .beaver-eye.right{right:6px}
#title-screen h1{font-size:1.3em}
.title-tagline{font-size:0.85em}
.btn-play{padding:14px 45px;font-size:1.2em}
.gender-opt{width:50px;height:50px;font-size:1.6em;min-width:44px;min-height:44px}
.modal-content{padding:16px 14px;max-width:95%}
.tutorial-item{font-size:0.85em}
#play-area{min-height:180px}
#hud{padding:6px 4px}
.hud-item{padding:2px 4px}
.hud-item .label{font-size:0.45em}
.hud-item .value{font-size:0.85em}
#beaver-mascot{width:36px;height:36px}
.beaver-speech{font-size:0.5em;padding:4px 6px;max-width:140px;white-space:normal}
.audio-label{font-size:0.4em}
.mute-btn{font-size:1em;padding:2px 4px;min-width:32px;min-height:32px}
#stalls-row{gap:3px;padding:6px 3px}
.stall{width:44px;min-height:70px}
.stall-body{width:38px;height:52px}
.stall-light{width:12px;height:12px;border-width:2px}
.stall-num{font-size:0.55em}
.stall-door::after{width:6px;height:20px;right:4px}
#floor-area{background-size:32px 32px}
#sinks-area{gap:4px;padding:4px 6px}
.sink{width:44px;height:38px}
.sink-bowl{width:26px;height:10px}
#towels{width:42px;height:48px}
#exit-door{width:40px;height:48px;font-size:1em}
#task-panel{padding:10px 12px;bottom:65px}
#task-panel h3{font-size:0.85em}
#task-panel .hint{font-size:0.55em}
.task-btn{padding:12px 16px;font-size:0.95em;min-height:48px}
#task-buttons{flex-direction:column;gap:8px}
.task-btn{width:100%}
#powerups{padding:6px 4px;gap:4px}
.powerup{padding:8px 10px;font-size:0.7em;min-height:40px}
.powerup .count{width:22px;height:22px;font-size:0.9em}
.person{font-size:1.3em}
.person-body{width:28px;height:38px}
.person-torso{width:18px;height:14px}
.person-legs{width:14px;height:8px}
.person .patience-bar{width:24px;height:4px;bottom:-10px}
.person .thought{font-size:0.45em;padding:3px 6px}
.person.special .special-name{bottom:-22px;font-size:0.28em;padding:1px 4px}
#wall-sign{font-size:0.55em;padding:3px 8px;top:6px}
.float-msg{font-size:1em}
.stats-grid{gap:8px;max-width:280px}
.stat{padding:10px}
.stat .num{font-size:1.3em}
.upgrade-card{padding:10px 8px}
.upgrade-icon{font-size:1.6em}
.upgrade-name{font-size:0.8em}
.upgrades-grid{gap:8px;max-width:320px}
.intro-card{padding:14px 12px;max-width:92%;border-width:4px}
.bucky-tip{padding:8px 10px;gap:8px;margin-bottom:12px}
.bucky-tip-icon{font-size:1.3em}
.bucky-tip-label{font-size:0.6em}
.bucky-tip-text{font-size:0.75em}
.intro-stats{gap:6px;flex-wrap:wrap;justify-content:center}
.intro-stat{padding:5px 8px;font-size:0.7em;gap:4px}
.intro-stat-icon{font-size:0.9em}
.intro-title{font-size:1.3em;margin-bottom:8px}
.intro-desc{font-size:0.8em;margin-bottom:12px}
.intro-shift-num{font-size:0.75em;letter-spacing:2px}
}
/* Interactive Tutorial */
.tutorial-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.85);z-index:900;display:none;align-items:center;justify-content:center;flex-direction:column}
.tutorial-overlay.active{display:flex}
.tutorial-highlight{position:relative;z-index:910;box-shadow:0 0 0 4px #f5a623,0 0 20px 8px rgba(245,166,35,0.6);border-radius:8px;animation:tutorial-pulse 1s ease-in-out infinite}
@keyframes tutorial-pulse{0%,100%{box-shadow:0 0 0 4px #f5a623,0 0 20px 8px rgba(245,166,35,0.6)}50%{box-shadow:0 0 0 6px #fdd835,0 0 30px 12px rgba(245,166,35,0.8)}}
.tutorial-speech{position:fixed;bottom:20%;left:50%;transform:translateX(-50%);background:linear-gradient(180deg,#fff 0%,#f0f0f0 100%);color:#333;padding:16px 24px;border-radius:16px;font-size:1.1em;max-width:320px;text-align:center;z-index:920;box-shadow:0 6px 20px rgba(0,0,0,0.4);border:3px solid #f5a623}
.tutorial-speech::before{content:'';position:absolute;top:-20px;left:50%;transform:translateX(-50%);border:12px solid transparent;border-bottom-color:#f5a623}
.tutorial-speech::after{content:'';position:absolute;top:-14px;left:50%;transform:translateX(-50%);border:10px solid transparent;border-bottom-color:#fff}
.tutorial-bucky{position:absolute;top:-45px;left:50%;transform:translateX(-50%);font-size:2em;animation:tutorial-bucky-bounce 0.5s ease-in-out infinite}
@keyframes tutorial-bucky-bounce{0%,100%{transform:translateX(-50%) translateY(0)}50%{transform:translateX(-50%) translateY(-5px)}}
.tutorial-arrow{position:fixed;font-size:2em;z-index:915;animation:tutorial-arrow-bounce 0.5s ease-in-out infinite;filter:drop-shadow(0 2px 4px rgba(0,0,0,0.5))}
@keyframes tutorial-arrow-bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
.tutorial-skip{position:fixed;top:20px;right:20px;background:none;border:2px solid rgba(255,255,255,0.5);color:rgba(255,255,255,0.8);padding:8px 16px;border-radius:8px;cursor:pointer;z-index:930;font-size:0.9em;transition:all 0.2s}
.tutorial-skip:hover{background:rgba(255,255,255,0.1);border-color:#fff;color:#fff}
.tutorial-next{margin-top:12px;padding:10px 24px;background:linear-gradient(180deg,#43a047,#2e7d32);color:#fff;border:2px solid #1b5e20;border-radius:10px;cursor:pointer;font-size:0.95em;font-weight:bold;transition:transform 0.15s}
.tutorial-next:hover{transform:scale(1.05)}

/* Leaderboard Styles */
.leaderboard-panel{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) scale(0.9);background:linear-gradient(180deg,#5a4030 0%,#3d2814 100%);border:4px solid #f5a623;border-radius:16px;padding:16px;width:90%;max-width:340px;z-index:100;opacity:0;pointer-events:none;transition:all 0.2s ease-out;box-shadow:0 8px 30px rgba(0,0,0,0.6)}
.leaderboard-panel.active{opacity:1;pointer-events:auto;transform:translate(-50%,-50%) scale(1)}
.lb-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding-bottom:8px;border-bottom:2px solid rgba(245,166,35,0.3)}
.lb-header h3{color:#f5a623;font-size:1.1em;margin:0}
.lb-close{background:none;border:none;color:#fff;font-size:1.5em;cursor:pointer;opacity:0.7;transition:opacity 0.2s}
.lb-close:hover{opacity:1}
.lb-list{display:flex;flex-direction:column;gap:6px;max-height:300px;overflow-y:auto}
.lb-row{display:grid;grid-template-columns:28px 1fr 70px 32px;align-items:center;gap:8px;padding:8px 10px;background:rgba(0,0,0,0.2);border-radius:8px;font-size:0.9em}
.lb-row.lb-you{background:rgba(245,166,35,0.2);border:1px solid rgba(245,166,35,0.4)}
.lb-rank{color:#f5a623;font-weight:bold;text-align:center}
.lb-name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.lb-score{text-align:right;color:#fdd835;font-weight:bold}
.lb-grade{text-align:center;font-weight:bold}
.lb-grade:contains('S'){color:#ffd700}
.lb-empty{text-align:center;color:#999;padding:20px;font-size:0.9em}

/* Game Over Name Input */
.go-name-section{margin:12px 0;padding:12px;background:rgba(0,0,0,0.2);border-radius:10px}
.go-name-section p{font-size:0.85em;margin-bottom:8px;color:#c9a86c}
.go-name-row{display:flex;gap:8px;justify-content:center}
#go-name-input{padding:8px 12px;border:2px solid #f5a623;border-radius:8px;background:rgba(0,0,0,0.3);color:#fff;font-size:1em;width:140px}
#go-name-input::placeholder{color:#888}
.btn-small{padding:8px 16px;font-size:0.9em}

/* Leaderboard Section on Game Over */
.leaderboard-section{margin:12px 0;padding:12px;background:rgba(0,0,0,0.2);border-radius:10px;width:100%;max-width:300px}
.leaderboard-section h4{color:#f5a623;margin-bottom:10px;font-size:0.95em}
